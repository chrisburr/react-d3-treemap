(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{163:function(e,a,n){"use strict";n.r(a);var t=n(170);a.default=t.a},170:function(e,a,n){"use strict";(function(e){var t=n(9),l=n.n(t),r=(n(180),n(181)),o=n.n(r),i=n(175),u=n(176),m=n(200),c=n(0),s=n(194),d=n(195),v=n(204),h=function(e){function a(a){var n;return(n=e.call(this,a)||this).state={data:s.a},n.treeMapRef=c.createRef(),n}return l()(a,e),a.prototype.render=function(){var e=this;return c.createElement(c.Fragment,null,c.createElement(o.a,null,(function(a){var n=a.width;a.height;return c.createElement(v.b,{ref:e.treeMapRef,id:"myTreeMap",width:n,height:400,data:e.state.data,valueUnit:"MB",colorModel:v.a.OneEachChildren,className:"AppTreeMap",nodeClassName:"AppTreeMap__node",svgClassName:"AppTreeMap__svg",paddingInner:2,customD3ColorScale:Object(i.b)(u.a)})})),c.createElement("div",null,c.createElement("a",{onClick:function(){return e.setState({data:d.a})}},"Change data")),c.createElement("div",null,c.createElement("a",{onClick:function(){return e.treeMapRef.current.resetZoom()}},"Zoom Reset")),c.createElement("div",null,c.createElement("a",{onClick:function(){return e.treeMapRef.current.zoomOut()}},"Zoom out")),c.createElement("div",null,c.createElement("a",{onClick:function(){return console.log(e.treeMapRef.current.getZoomLevel())}},"Zoom level")))},a}(c.Component);a.a=Object(m.hot)(e)(h)}).call(this,n(179)(e))},194:function(e,a,n){"use strict";n.d(a,"a",(function(){return t}));var t={name:"flare",children:[{name:"analytics",className:"AppTreeMap__analytics",link:"https://blog.josequinto.com",children:[{name:"cluster",children:[{name:"AgglomerativeCluster",value:3938,link:"https://blog.josequinto.com"},{name:"CommunityStructure",value:3812},{name:"HierarchicalCluster",value:6714},{name:"MergeEdge",value:743}]},{name:"graph",children:[{name:"BetweennessCentrality",value:3534},{name:"LinkDistance",value:5731},{name:"MaxFlowMinCut",value:7840},{name:"ShortestPaths",value:5914},{name:"SpanningTree",value:3416}]},{name:"optimization",children:[{name:"AspectRatioBanker",value:7074}]}]},{name:"animate",children:[{name:"Easing",value:17010},{name:"FunctionSequence",value:5842},{name:"interpolate",children:[{name:"ArrayInterpolator",value:1983},{name:"ColorInterpolator",value:2047},{name:"DateInterpolator",value:1375},{name:"Interpolator",value:8746},{name:"MatrixInterpolator",value:2202},{name:"NumberInterpolator",value:1382},{name:"ObjectInterpolator",value:1629},{name:"PointInterpolator",value:1675},{name:"RectangleInterpolator",value:2042}]},{name:"ISchedulable",value:1041},{name:"Parallel",value:5176},{name:"Pause",value:449},{name:"Scheduler",value:5593},{name:"Sequence",value:5534},{name:"Transition",value:9201},{name:"Transitioner",value:19975},{name:"TransitionEvent",value:1116},{name:"Tween",value:6006}]},{name:"data",children:[{name:"converters",children:[{name:"Converters",value:721},{name:"DelimitedTextConverter",value:4294},{name:"GraphMLConverter",value:9800},{name:"IDataConverter",value:1314},{name:"JSONConverter",value:2220}]},{name:"DataField",value:1759},{name:"DataSchema",value:2165},{name:"DataSet",value:586},{name:"DataSource",value:3331},{name:"DataTable",value:772},{name:"DataUtil",value:3322}]},{name:"display",children:[{name:"DirtySprite",value:8833},{name:"LineSprite",value:1732},{name:"RectSprite",value:3623},{name:"TextSprite",value:10066}]},{name:"flex",children:[{name:"FlareVis",value:4116}]},{name:"physics",children:[{name:"DragForce",value:1082},{name:"GravityForce",value:1336},{name:"IForce",value:319},{name:"NBodyForce",value:10498},{name:"Particle",value:2822},{name:"Simulation",value:9983},{name:"Spring",value:2213},{name:"SpringForce",value:1681}]},{name:"query",children:[{name:"AggregateExpression",value:1616},{name:"And",value:1027},{name:"Arithmetic",value:3891},{name:"Average",value:891},{name:"BinaryExpression",value:2893},{name:"Comparison",value:5103},{name:"CompositeExpression",value:3677},{name:"Count",value:781},{name:"DateUtil",value:4141},{name:"Distinct",value:933},{name:"Expression",value:5130},{name:"ExpressionIterator",value:3617},{name:"Fn",value:3240},{name:"If",value:2732},{name:"IsA",value:2039},{name:"Literal",value:1214},{name:"Match",value:3748},{name:"Maximum",value:843},{name:"methods",children:[{name:"add",value:593},{name:"and",value:330},{name:"average",value:287},{name:"count",value:277},{name:"distinct",value:292},{name:"div",value:595},{name:"eq",value:594},{name:"fn",value:460},{name:"gt",value:603},{name:"gte",value:625},{name:"iff",value:748},{name:"isa",value:461},{name:"lt",value:597},{name:"lte",value:619},{name:"max",value:283},{name:"min",value:283},{name:"mod",value:591},{name:"mul",value:603},{name:"neq",value:599},{name:"not",value:386},{name:"or",value:323},{name:"orderby",value:307},{name:"range",value:772},{name:"select",value:296},{name:"stddev",value:363},{name:"sub",value:600},{name:"sum",value:280},{name:"update",value:307},{name:"variance",value:335},{name:"where",value:299},{name:"xor",value:354},{name:"_",value:264}]},{name:"Minimum",value:843},{name:"Not",value:1554},{name:"Or",value:970},{name:"Query",value:13896},{name:"Range",value:1594},{name:"StringUtil",value:4130},{name:"Sum",value:791},{name:"Variable",value:1124},{name:"Variance",value:1876},{name:"Xor",value:1101}]},{name:"scale",children:[{name:"IScaleMap",value:2105},{name:"LinearScale",value:1316},{name:"LogScale",value:3151},{name:"OrdinalScale",value:3770},{name:"QuantileScale",value:2435},{name:"QuantitativeScale",value:4839},{name:"RootScale",value:1756},{name:"Scale",value:4268},{name:"ScaleType",value:1821},{name:"TimeScale",value:5833}]},{name:"util",children:[{name:"Arrays",value:8258},{name:"Colors",value:10001},{name:"Dates",value:8217},{name:"Displays",value:12555},{name:"Filter",value:2324},{name:"Geometry",value:10993},{name:"heap",children:[{name:"FibonacciHeap",value:9354},{name:"HeapNode",value:1233}]},{name:"IEvaluable",value:335},{name:"IPredicate",value:383},{name:"IValueProxy",value:874},{name:"math",children:[{name:"DenseMatrix",value:3165},{name:"IMatrix",value:2815},{name:"SparseMatrix",value:3366}]},{name:"Maths",value:17705},{name:"Orientation",value:1486},{name:"palette",children:[{name:"ColorPalette",value:6367},{name:"Palette",value:1229},{name:"ShapePalette",value:2059},{name:"SizePalette",value:2291}]},{name:"Property",value:5559},{name:"Shapes",value:19118},{name:"Sort",value:6887},{name:"Stats",value:6557},{name:"Strings",value:22026}]},{name:"vis",children:[{name:"axis",children:[{name:"Axes",value:1302},{name:"Axis",value:24593},{name:"AxisGridLine",value:652},{name:"AxisLabel",value:636},{name:"CartesianAxes",value:6703}]},{name:"controls",children:[{name:"AnchorControl",value:2138},{name:"ClickControl",value:3824},{name:"Control",value:1353},{name:"ControlList",value:4665},{name:"DragControl",value:2649},{name:"ExpandControl",value:2832},{name:"HoverControl",value:4896},{name:"IControl",value:763},{name:"PanZoomControl",value:5222},{name:"SelectionControl",value:7862},{name:"TooltipControl",value:8435}]},{name:"data",children:[{name:"Data",value:20544},{name:"DataList",value:19788},{name:"DataSprite",value:10349},{name:"EdgeSprite",value:3301},{name:"NodeSprite",value:19382},{name:"render",children:[{name:"ArrowType",value:698},{name:"EdgeRenderer",value:5569},{name:"IRenderer",value:353},{name:"ShapeRenderer",value:2247}]},{name:"ScaleBinding",value:11275},{name:"Tree",value:7147},{name:"TreeBuilder",value:9930}]},{name:"events",children:[{name:"DataEvent",value:2313},{name:"SelectionEvent",value:1880},{name:"TooltipEvent",value:1701},{name:"VisualizationEvent",value:1117}]},{name:"legend",children:[{name:"Legend",value:20859},{name:"LegendItem",value:4614},{name:"LegendRange",value:10530}]},{name:"operator",children:[{name:"distortion",children:[{name:"BifocalDistortion",value:4461},{name:"Distortion",value:6314},{name:"FisheyeDistortion",value:3444}]},{name:"encoder",children:[{name:"ColorEncoder",value:3179},{name:"Encoder",value:4060},{name:"PropertyEncoder",value:4138},{name:"ShapeEncoder",value:1690},{name:"SizeEncoder",value:1830}]},{name:"filter",children:[{name:"FisheyeTreeFilter",value:5219},{name:"GraphDistanceFilter",value:3165},{name:"VisibilityFilter",value:3509}]},{name:"IOperator",value:1286},{name:"label",children:[{name:"Labeler",value:9956},{name:"RadialLabeler",value:3899},{name:"StackedAreaLabeler",value:3202}]},{name:"layout",children:[{name:"AxisLayout",value:6725},{name:"BundledEdgeRouter",value:3727},{name:"CircleLayout",value:9317},{name:"CirclePackingLayout",value:12003},{name:"DendrogramLayout",value:4853},{name:"ForceDirectedLayout",value:8411},{name:"IcicleTreeLayout",value:4864},{name:"IndentedTreeLayout",value:3174},{name:"Layout",value:7881},{name:"NodeLinkTreeLayout",value:12870},{name:"PieLayout",value:2728},{name:"RadialTreeLayout",value:12348},{name:"RandomLayout",value:870},{name:"StackedAreaLayout",value:9121},{name:"TreeMapLayout",value:9191}]},{name:"Operator",value:2490},{name:"OperatorList",value:5248},{name:"OperatorSequence",value:4190},{name:"OperatorSwitch",value:2581},{name:"SortOperator",value:2023}]},{name:"Visualization",value:16540}]}]}},195:function(e,a,n){"use strict";n.d(a,"a",(function(){return t}));var t={name:"Documents",children:[{name:"AgglomerativeCluster",value:3938,link:"https://blog.josequinto.com"},{name:"CommunityStructure",value:3812},{name:"HierarchicalCluster",value:6714},{name:"MergeEdge",value:743}]}},204:function(e,a,n){"use strict";var t,l=n(9),r=n.n(l),o=(n(41),n(104),n(42),n(174),n(68),n(103),n(197),n(0)),i=n(166),u=n.n(i),m=n(203),c=n(202),s=n(175),d=n(164),v=n(176),h=(n(102),n(198),function(e,a){return e/2*a+5}),p=function(e){var a=e.label,n=e.textColor,t=e.fontSize,l=e.value,r=e.hasChildren;if(!a)return null;if(!0===r){var i=l?a+"Â "+l:a;return o.createElement("tspan",{fontSize:t,fill:n,dx:4,dy:t},i)}return(l?a.split(/(?=[A-Z][^A-Z])/g).concat(l):a.split(/(?=[A-Z][^A-Z])/g)).map((function(e,a){return o.createElement("tspan",{fontSize:t,fill:n,key:a,x:4,dy:t},e)}))},g=function(e){var a=e.name,n=e.width,t=e.height,l=e.fontSize,r=e.textColor,i=e.nodeTotalNodes,u=h(l,i.toString().length),m=l,c=u+m;return n>u&&t>m?o.createElement("g",null,o.createElement("rect",{id:"rectNumberItems-"+a,x:n-u,y:0,width:u,height:m+2,fill:"none",stroke:r,strokeDasharray:"0,"+c+","+c}),o.createElement("text",{fontSize:l,fill:r,x:n-u+u/2,y:m,textAnchor:"middle"},i)):null},C=function(e){var a=e.bgColor,n=e.className,t=e.fontSize,l=e.globalTotalNodes,r=e.hasChildren,i=e.height,m=e.hideNumberOfChildren,c=e.id,s=e.isSelectedNode,d=e.label,v=e.nodeTotalNodes,C=e.onClick,b=e.textColor,f=e.treemapId,S=e.url,y=e.value,I=e.width,x=e.x0,E=e.x1,_=e.xScaleFactor,N=e.xScaleFunction,F=e.xTranslated,D=e.y0,T=e.y1,k=e.yScaleFactor,O=e.yScaleFunction,M=e.yTranslated,w=e.zoomEnabled,P=e.style,L=void 0!==F?F:!0===w?N(x):x,A=void 0!==M?M:!0===w?O(D):D,z=void 0!==I?I:_*(E-x),R=void 0!==i?i:k*(T-D),j=!0===r&&!1===s?"pointer":"auto",B=h(t,v.toString().length),V=!m&&r,Z=Math.max(0,V?z-B:z);return o.createElement("g",{transform:"translate("+L+","+A+")",id:""+c,onClick:r?C:null,style:{cursor:j}},o.createElement("rect",{id:"rect-"+c,width:z,height:R,className:u()("Node",n),style:Object.assign({fill:a,stroke:b},P)}),o.createElement("clipPath",{id:"clip-"+f+"-"+c},o.createElement("rect",{width:Z,height:R})),o.createElement("a",{href:S,target:"_blank"},o.createElement("text",{clipPath:"url(#clip-"+f+"-"+c+")"},o.createElement(p,{label:d,textColor:b,fontSize:t,value:y,hasChildren:r}))),V&&o.createElement(g,{name:name,width:z,height:R,fontSize:t,textColor:b,nodeTotalNodes:v}),o.createElement("title",null,d+"\n"+y+"\n"+v+"/"+l))},b=(n(199),function(e){var a=e.className,n=e.items;return n?o.createElement("div",{className:u()("TreeMap__breadcrumb",a)},n.map((function(e,a){return o.createElement("div",{key:a},o.createElement("a",{className:"TreeMap__breadcrumbItem",id:e.key,key:e.key,onClick:e.onClick?function(a){return e.onClick(a,e)}:void 0,href:e.href},e.text),a<n.length-1?o.createElement("span",{className:"TreeMap__breadcrumbSeparator"},"/"):null)}))):null});!function(e){e[e.Depth=0]="Depth",e[e.Value=1]="Value",e[e.NumberOfChildren=2]="NumberOfChildren",e[e.OneEachChildren=3]="OneEachChildren"}(t||(t={}));n(69);var f=function(){function e(){}return e.getTopChildren=function(e){return e.children?e.children.length:0},e.getTopSubParent=function(e){return e.parent&&e.parent.parent?this.getTopSubParent(e.parent):e.customId},e.getDepth=function(e){var a=this,n=0;return e.children&&e.children.forEach((function(e){var t=a.getDepth(e);t>n&&(n=t)})),1+n},e.getRGBColor=function(e){if(!e)return{r:0,g:0,b:0};var a=Array.isArray(e)?e.pop():e;if("white"===a||"papayawhip"===a)return{r:255,g:255,b:255};if("black"===a)return{r:0,g:0,b:0};var n=a.replace(/[^\d,]/g,"").split(",");return n&&3===n.length?{r:parseInt(n[0],10),g:parseInt(n[1],10),b:parseInt(n[2],10)}:void 0},e.getHighContrastColor=function(e,a,n){for(var t=[e/255,a/255,n/255],l=0;l<t.length;++l)t[l]<=.03928?t[l]=t[l]/12.92:t[l]=Math.pow((t[l]+.055)/1.055,2.4);return.2126*t[0]+.7152*t[1]+.0722*t[2]>.4?"black":"white"},e.getHighContrastColorFromString=function(a){if(!a)return"black";var n=e.getRGBColor(a);return n?e.getHighContrastColor(n.r,n.g,n.b):void 0},e}(),S=function(e){function a(a){var n;(n=e.call(this,a)||this)._onBreadcrumbItemClicked=function(e,a){n._zoomTo(parseInt(a.key))},n._onNodeClick=function(e){n._zoomTo(parseInt(e.currentTarget.id))};var t=a.width,l=a.height,r=a.data,o=a.namePropInData;return n._createD3TreeMap(t,l,r),n.state={height:l,width:t,data:r,xScaleFactor:1,yScaleFactor:1,xScaleFunction:Object(s.a)().range([0,t]),yScaleFunction:Object(s.a)().range([0,l]),zoomEnabled:!1,breadCrumbItems:[{text:r[o],key:0,onClick:n._onBreadcrumbItemClicked}],selectedId:0,scopedNodes:n._nodes,selectedNode:n._treemap(n._rootData),totalNodes:n._nodes.length,selectedNodeTotalNodes:n._nodes.length},n}r()(a,e);var n=a.prototype;return n.componentWillReceiveProps=function(e){var a=e.width,n=e.height,t=e.data,l=e.namePropInData;n===this.props.height&&a===this.props.width||this.setState({width:a,height:n,xScaleFunction:Object(s.a)().range([0,a]),yScaleFunction:Object(s.a)().range([0,n])}),this._createD3TreeMap(a,n,t),this.setState({data:t,width:a,height:n,xScaleFactor:1,yScaleFactor:1,xScaleFunction:Object(s.a)().range([0,a]),yScaleFunction:Object(s.a)().range([0,n]),zoomEnabled:!1,breadCrumbItems:[{text:t[l],key:0,onClick:this._onBreadcrumbItemClicked}],selectedId:0,scopedNodes:this._nodes,selectedNode:this._treemap(this._rootData),totalNodes:this._nodes.length,selectedNodeTotalNodes:this._nodes.length})},n.render=function(){var e=this,a=this.state,n=a.width,t=a.height,l=a.breadCrumbItems,r=a.selectedNode,i=a.data,m=this.props,c=m.svgClassName,s=m.svgStyle,d=m.className,v=m.childrenPropInData,h=m.breadCrumbClassName,p=m.disableBreadcrumb;this._createD3TreeMap(n,t,i);var g=[];return function a(n,t){g=g.concat(e._getNode(n)),t<1&&n.hasOwnProperty(v)&&n[v].length>0&&n[v].forEach((function(e){a(e,t+1)}))}(r,0),o.createElement("div",{className:d},!1===p?o.createElement(b,{items:l,className:h}):null,o.createElement("svg",{className:u()("TreeMap__mainSvg",c),height:t,width:n,style:Object.assign({},s)},g))},n._createD3TreeMap=function(e,a,n){var l=this.props,r=l.valuePropInData,o=l.paddingInner,i=l.valueFormat,u=l.colorModel,s=l.customD3ColorScale;this._treemap||(this._treemap=Object(c.b)().size([e,a]).tile(c.c).paddingOuter(3).paddingTop(19).paddingInner(o).round(!0)),this._rootData||(this._rootData=Object(c.a)(n).sum((function(e){return e[r]})).sort((function(e,a){return a.height-e.height||a[r]-e[r]})));var v,h=0;switch(this._nodes=this._treemap(this._rootData).each((function(e){e.customId=h++})).descendants(),this._valueFormatFunction=Object(m.a)(i),u){case t.Depth:v=[0,f.getDepth(n)-1];break;case t.Value:v=Object(d.d)(this._nodes,(function(e){if(null!==e.parent)return e[r]}));break;case t.NumberOfChildren:v=Object(d.d)(this._nodes,(function(e){return null!==e.parent?e.descendants().length:1}));break;case t.OneEachChildren:v=[f.getTopChildren(n),0]}this._nodesbgColorFunction=s.domain(v)},n._getNode=function(e){var a=this.props,n=a.id,t=a.valueUnit,l=a.hideValue,r=a.hideNumberOfChildren,i=a.nodeStyle,m=a.nodeClassName,c=a.valuePropInData,s=a.childrenPropInData,d=a.namePropInData,v=a.linkPropInData,h=this.state,p=h.totalNodes,g=h.selectedId,b=h.xScaleFactor,f=h.xScaleFunction,S=h.yScaleFactor,y=h.yScaleFunction,I=h.zoomEnabled,x=e.data[d],E=e.customId,_=e.data[v],N=e.data.className,F=!!(e[s]&&e[s].length>0),D="("+this._valueFormatFunction(e[c])+" "+t+")",T=e.descendants().length-1,k=this._getColorsFromNode(e,T),O=k.bgColor,M=k.textColor;return o.createElement(C,{bgColor:O,className:u()(m,N),style:i,fontSize:14,globalTotalNodes:p,hasChildren:F,hideNumberOfChildren:r,id:E,isSelectedNode:E===g,key:E,label:x,name:x,nodeTotalNodes:T,onClick:this._onNodeClick,textColor:M,treemapId:n,url:_,value:!l&&D,x0:e.x0,x1:e.x1,xScaleFactor:b,xScaleFunction:f,y0:e.y0,y1:e.y1,yScaleFactor:S,yScaleFunction:y,zoomEnabled:I})},n._getColorsFromNode=function(e,a){var n,l=this.props,r=l.colorModel,o=l.valuePropInData;switch(r){case t.Depth:n=this._nodesbgColorFunction(e.depth),null===e.parent&&(n=this._nodesbgColorFunction(0));break;case t.Value:n=this._nodesbgColorFunction(e[o]),null===e.parent&&(n=this._nodesbgColorFunction(1));break;case t.NumberOfChildren:n=this._nodesbgColorFunction(a),null===e.parent&&(n=this._nodesbgColorFunction(1));break;case t.OneEachChildren:var i=this._nodesbgColorFunction(f.getTopSubParent(e));n=e.depth>1?Object(s.a)().domain([0,e&&e.children?e.children.length:1]).range(["white",i])(f.getTopSubParent(e)):i,null===e.parent&&(n=this._nodesbgColorFunction(0))}return{bgColor:n,textColor:f.getHighContrastColorFromString(n)}},n.resetZoom=function(){this._zoomTo(0)},n.zoomOut=function(){var e=this.state.selectedId,a=this._nodes.filter((function(a){return a.customId===e})).pop();a&&a.parent&&void 0!==a.parent.customId&&this._zoomTo(a.parent.customId)},n.getZoomLevel=function(){return this.state.selectedNode.depth},n._zoomTo=function(e){var a=this,n=this.state,t=n.selectedId,l=n.xScaleFunction,r=n.yScaleFunction,o=n.width,i=n.height;if(t!==e){var u=this._nodes.filter((function(a){return a.customId.toString()===e.toString()}));if(u.length>0){var m=u[0],c=m.descendants(),s=m.x0,d=m.y0,v=m.x1-m.x0,h=m.y1-m.y0,p=o/v,g=i/h,C=this._treemap(this._rootData).path(m).map((function(e){return{text:e.data.name,key:e.customId,onClick:a._onBreadcrumbItemClicked}}));this.setState({xScaleFactor:p,yScaleFactor:g,xScaleFunction:l.domain([s,s+v]),yScaleFunction:r.domain([d,d+h]),zoomEnabled:null!==m.parent,selectedId:e,selectedNode:m,scopedNodes:c,selectedNodeTotalNodes:c.length,breadCrumbItems:C})}else console.warn("No node found for "+e)}},a}(o.Component);S.defaultProps={id:"myTreeMap",data:null,height:600,width:600,valueFormat:",d",valueUnit:"MB",disableBreadcrumb:!1,colorModel:t.Depth,paddingInner:0,customD3ColorScale:Object(s.b)(v.a),namePropInData:"name",linkPropInData:"link",valuePropInData:"value",childrenPropInData:"children"};var y=S;n.d(a,"b",(function(){return y})),n.d(a,"a",(function(){return t}))}}]);
//# sourceMappingURL=component---src-pages-index-tsx-fc0ed79120a87aa5872e.js.map