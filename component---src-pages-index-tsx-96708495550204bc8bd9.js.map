{"version":3,"sources":["webpack:///./src/pages/index.tsx","webpack:///./src/data/data.ts","webpack:///./src/components/TreeMap/ITreeMapProps.ts","webpack:///./src/data/data.1.level.ts","webpack:///./src/App/App.tsx","webpack:///./src/components/Node/Node.tsx","webpack:///./src/components/Breadcrumb/Breadcrumb.tsx","webpack:///./src/utils/Utils.ts","webpack:///./src/components/TreeMap/TreeMap.tsx"],"names":["App","data","name","children","className","link","value","ColorModel","props","state","data1","treeMapRef","React","componentDidMount","console","log","this","current","render","width","height","ref","id","valueUnit","nodeClassName","paddingInner","onZoom","level","items","onTreeMapDidMount","treeMap","getZoomLevel","nodeStyle","fontSize","paddingTop","paddingLeft","paddingRight","numberOfChildrenPlacement","NumberOfChildrenPlacement","BottomRight","customD3ColorScale","scaleSequential","chromatic","colorModel","OneEachChildren","onClick","setState","data2","resetZoom","zoomOut","hot","module","canvas","getNumberItemsWidthByNumberOfChars","numberOfChars","getTextWidth","text","style","fontVariant","fontWeight","fontFamily","document","createElement","context","getContext","font","measureText","charWidthCache","LabelNewLine","label","textColor","hasChildren","containerWidth","fullLabel","split","concat","map","item","index","fill","key","x","dy","maxWidth","ellipsis","cachedCharWidth","char","cached","undefined","charWidth","truncatedChars","charArray","Array","from","ellipsisWidth","charAt","currentWidth","didTruncate","i","length","join","truncateText","NumberOfChildren","nodeTotalNodes","isSelectedNode","placement","realPlacement","TopRight","Number","itemsWidth","toString","itemsHeight","strokeDasharrayTotal","transform","y","stroke","strokeDasharray","textAnchor","Node","bgColor","globalTotalNodes","hideNumberOfChildren","treemapId","url","x0","x1","xScaleFactor","xScaleFunction","xTranslated","y0","y1","yScaleFactor","yScaleFunction","yTranslated","zoomEnabled","currentXTranslated","currentYTranslated","currentHeight","cursor","showNumberOfItems","paddedCurrentWidth","clipWidth","Math","max","classnames","Node__link","href","target","clipPath","Breadcrumb","Utils","getTopSubParent","node","parent","customId","getDepth","obj","childrenPropInData","depth","forEach","d","tmpDepth","getHighContrastColor","r","g","b","c","pow","getHighContrastColorFromString","backgroundColor","rgbColor","rgb","TreeMap","_onBreadcrumbItemClicked","ev","_zoomTo","currentTarget","_onNodeClick","parseInt","namePropInData","_createD3TreeMap","scaleLinear","range","breadcrumbItems","selectedId","selectedNode","_treemap","_rootData","totalNodes","_nodes","UNSAFE_componentWillReceiveProps","nextProps","svgClassName","svgStyle","breadCrumbClassName","disableBreadcrumb","reactNodes","iterateAllChildren","mainNode","_getNode","hasOwnProperty","element","valuePropInData","valueFormat","treemap","size","tile","treemapSquarify","paddingOuter","round","hierarchy","sum","s","sort","a","numberItemId","each","descendants","_valueFormatFunction","format","Depth","Value","extent","n","_nodesbgColorFunction","domain","hideValue","linkPropInData","nodeClassNameFromData","formattedValue","_getColorsFromNode","originalBackgroundColor","interpolate","interpolateHcl","nodeId","currentNode","filter","pop","dx","path","warn","defaultProps","interpolateSpectral"],"mappings":"0FAAA,oBACeA,YAAf,G,iCCDA,kCAMO,IAAMC,EAAO,CAClBC,KAAM,QACNC,SAAU,CACR,CACED,KAAM,YACNE,UAAW,wBACXC,KAAM,8BACNF,SAAU,CACR,CACED,KAAM,UACNC,SAAU,CACR,CACED,KAAM,uBACNI,MAAO,KACPD,KAAM,+BAER,CAAEH,KAAM,qBAAsBI,MAAO,MACrC,CAAEJ,KAAM,sBAAuBI,MAAO,MACtC,CAAEJ,KAAM,YAAaI,MAAO,OAGhC,CACEJ,KAAM,QACNC,SAAU,CACR,CAAED,KAAM,wBAAyBI,MAAO,MACxC,CAAEJ,KAAM,eAAgBI,MAAO,MAC/B,CAAEJ,KAAM,gBAAiBI,MAAO,MAChC,CAAEJ,KAAM,gBAAiBI,MAAO,MAChC,CAAEJ,KAAM,eAAgBI,MAAO,QAGnC,CACEJ,KAAM,eACNC,SAAU,CAAC,CAAED,KAAM,oBAAqBI,MAAO,UAIrD,CACEJ,KAAM,UACNC,SAAU,CACR,CAAED,KAAM,SAAUI,MAAO,OACzB,CAAEJ,KAAM,mBAAoBI,MAAO,MACnC,CACEJ,KAAM,cACNC,SAAU,CACR,CAAED,KAAM,oBAAqBI,MAAO,MACpC,CAAEJ,KAAM,oBAAqBI,MAAO,MACpC,CAAEJ,KAAM,mBAAoBI,MAAO,MACnC,CAAEJ,KAAM,eAAgBI,MAAO,MAC/B,CAAEJ,KAAM,qBAAsBI,MAAO,MACrC,CAAEJ,KAAM,qBAAsBI,MAAO,MACrC,CAAEJ,KAAM,qBAAsBI,MAAO,MACrC,CAAEJ,KAAM,oBAAqBI,MAAO,MACpC,CAAEJ,KAAM,wBAAyBI,MAAO,QAG5C,CAAEJ,KAAM,eAAgBI,MAAO,MAC/B,CAAEJ,KAAM,WAAYI,MAAO,MAC3B,CAAEJ,KAAM,QAASI,MAAO,KACxB,CAAEJ,KAAM,YAAaI,MAAO,MAC5B,CAAEJ,KAAM,WAAYI,MAAO,MAC3B,CAAEJ,KAAM,aAAcI,MAAO,MAC7B,CAAEJ,KAAM,eAAgBI,MAAO,OAC/B,CAAEJ,KAAM,kBAAmBI,MAAO,MAClC,CAAEJ,KAAM,QAASI,MAAO,QAG5B,CACEJ,KAAM,OACNC,SAAU,CACR,CACED,KAAM,aACNC,SAAU,CACR,CAAED,KAAM,aAAcI,MAAO,KAC7B,CAAEJ,KAAM,yBAA0BI,MAAO,MACzC,CAAEJ,KAAM,mBAAoBI,MAAO,MACnC,CAAEJ,KAAM,iBAAkBI,MAAO,MACjC,CAAEJ,KAAM,gBAAiBI,MAAO,QAGpC,CAAEJ,KAAM,YAAaI,MAAO,MAC5B,CAAEJ,KAAM,aAAcI,MAAO,MAC7B,CAAEJ,KAAM,UAAWI,MAAO,KAC1B,CAAEJ,KAAM,aAAcI,MAAO,MAC7B,CAAEJ,KAAM,YAAaI,MAAO,KAC5B,CAAEJ,KAAM,WAAYI,MAAO,QAG/B,CACEJ,KAAM,UACNC,SAAU,CACR,CAAED,KAAM,cAAeI,MAAO,MAC9B,CAAEJ,KAAM,aAAcI,MAAO,MAC7B,CAAEJ,KAAM,aAAcI,MAAO,MAC7B,CAAEJ,KAAM,aAAcI,MAAO,SAGjC,CACEJ,KAAM,OACNC,SAAU,CAAC,CAAED,KAAM,WAAYI,MAAO,QAExC,CACEJ,KAAM,UACNC,SAAU,CACR,CAAED,KAAM,YAAaI,MAAO,MAC5B,CAAEJ,KAAM,eAAgBI,MAAO,MAC/B,CAAEJ,KAAM,SAAUI,MAAO,KACzB,CAAEJ,KAAM,aAAcI,MAAO,OAC7B,CAAEJ,KAAM,WAAYI,MAAO,MAC3B,CAAEJ,KAAM,aAAcI,MAAO,MAC7B,CAAEJ,KAAM,SAAUI,MAAO,MACzB,CAAEJ,KAAM,cAAeI,MAAO,QAGlC,CACEJ,KAAM,QACNC,SAAU,CACR,CAAED,KAAM,sBAAuBI,MAAO,MACtC,CAAEJ,KAAM,MAAOI,MAAO,MACtB,CAAEJ,KAAM,aAAcI,MAAO,MAC7B,CAAEJ,KAAM,UAAWI,MAAO,KAC1B,CAAEJ,KAAM,mBAAoBI,MAAO,MACnC,CAAEJ,KAAM,aAAcI,MAAO,MAC7B,CAAEJ,KAAM,sBAAuBI,MAAO,MACtC,CAAEJ,KAAM,QAASI,MAAO,KACxB,CAAEJ,KAAM,WAAYI,MAAO,MAC3B,CAAEJ,KAAM,WAAYI,MAAO,KAC3B,CAAEJ,KAAM,aAAcI,MAAO,MAC7B,CAAEJ,KAAM,qBAAsBI,MAAO,MACrC,CAAEJ,KAAM,KAAMI,MAAO,MACrB,CAAEJ,KAAM,KAAMI,MAAO,MACrB,CAAEJ,KAAM,MAAOI,MAAO,MACtB,CAAEJ,KAAM,UAAWI,MAAO,MAC1B,CAAEJ,KAAM,QAASI,MAAO,MACxB,CAAEJ,KAAM,UAAWI,MAAO,KAC1B,CACEJ,KAAM,UACNC,SAAU,CACR,CAAED,KAAM,MAAOI,MAAO,KACtB,CAAEJ,KAAM,MAAOI,MAAO,KACtB,CAAEJ,KAAM,UAAWI,MAAO,KAC1B,CAAEJ,KAAM,QAASI,MAAO,KACxB,CAAEJ,KAAM,WAAYI,MAAO,KAC3B,CAAEJ,KAAM,MAAOI,MAAO,KACtB,CAAEJ,KAAM,KAAMI,MAAO,KACrB,CAAEJ,KAAM,KAAMI,MAAO,KACrB,CAAEJ,KAAM,KAAMI,MAAO,KACrB,CAAEJ,KAAM,MAAOI,MAAO,KACtB,CAAEJ,KAAM,MAAOI,MAAO,KACtB,CAAEJ,KAAM,MAAOI,MAAO,KACtB,CAAEJ,KAAM,KAAMI,MAAO,KACrB,CAAEJ,KAAM,MAAOI,MAAO,KACtB,CAAEJ,KAAM,MAAOI,MAAO,KACtB,CAAEJ,KAAM,MAAOI,MAAO,KACtB,CAAEJ,KAAM,MAAOI,MAAO,KACtB,CAAEJ,KAAM,MAAOI,MAAO,KACtB,CAAEJ,KAAM,MAAOI,MAAO,KACtB,CAAEJ,KAAM,MAAOI,MAAO,KACtB,CAAEJ,KAAM,KAAMI,MAAO,KACrB,CAAEJ,KAAM,UAAWI,MAAO,KAC1B,CAAEJ,KAAM,QAASI,MAAO,KACxB,CAAEJ,KAAM,SAAUI,MAAO,KACzB,CAAEJ,KAAM,SAAUI,MAAO,KACzB,CAAEJ,KAAM,MAAOI,MAAO,KACtB,CAAEJ,KAAM,MAAOI,MAAO,KACtB,CAAEJ,KAAM,SAAUI,MAAO,KACzB,CAAEJ,KAAM,WAAYI,MAAO,KAC3B,CAAEJ,KAAM,QAASI,MAAO,KACxB,CAAEJ,KAAM,MAAOI,MAAO,KACtB,CAAEJ,KAAM,IAAKI,MAAO,OAGxB,CAAEJ,KAAM,UAAWI,MAAO,KAC1B,CAAEJ,KAAM,MAAOI,MAAO,MACtB,CAAEJ,KAAM,KAAMI,MAAO,KACrB,CAAEJ,KAAM,QAASI,MAAO,OACxB,CAAEJ,KAAM,QAASI,MAAO,MACxB,CAAEJ,KAAM,aAAcI,MAAO,MAC7B,CAAEJ,KAAM,MAAOI,MAAO,KACtB,CAAEJ,KAAM,WAAYI,MAAO,MAC3B,CAAEJ,KAAM,WAAYI,MAAO,MAC3B,CAAEJ,KAAM,MAAOI,MAAO,QAG1B,CACEJ,KAAM,QACNC,SAAU,CACR,CAAED,KAAM,YAAaI,MAAO,MAC5B,CAAEJ,KAAM,cAAeI,MAAO,MAC9B,CAAEJ,KAAM,WAAYI,MAAO,MAC3B,CAAEJ,KAAM,eAAgBI,MAAO,MAC/B,CAAEJ,KAAM,gBAAiBI,MAAO,MAChC,CAAEJ,KAAM,oBAAqBI,MAAO,MACpC,CAAEJ,KAAM,YAAaI,MAAO,MAC5B,CAAEJ,KAAM,QAASI,MAAO,MACxB,CAAEJ,KAAM,YAAaI,MAAO,MAC5B,CAAEJ,KAAM,YAAaI,MAAO,QAGhC,CACEJ,KAAM,OACNC,SAAU,CACR,CAAED,KAAM,SAAUI,MAAO,MACzB,CAAEJ,KAAM,SAAUI,MAAO,OACzB,CAAEJ,KAAM,QAASI,MAAO,MACxB,CAAEJ,KAAM,WAAYI,MAAO,OAC3B,CAAEJ,KAAM,SAAUI,MAAO,MACzB,CAAEJ,KAAM,WAAYI,MAAO,OAC3B,CACEJ,KAAM,OACNC,SAAU,CACR,CAAED,KAAM,gBAAiBI,MAAO,MAChC,CAAEJ,KAAM,WAAYI,MAAO,QAG/B,CAAEJ,KAAM,aAAcI,MAAO,KAC7B,CAAEJ,KAAM,aAAcI,MAAO,KAC7B,CAAEJ,KAAM,cAAeI,MAAO,KAC9B,CACEJ,KAAM,OACNC,SAAU,CACR,CAAED,KAAM,cAAeI,MAAO,MAC9B,CAAEJ,KAAM,UAAWI,MAAO,MAC1B,CAAEJ,KAAM,eAAgBI,MAAO,QAGnC,CAAEJ,KAAM,QAASI,MAAO,OACxB,CAAEJ,KAAM,cAAeI,MAAO,MAC9B,CACEJ,KAAM,UACNC,SAAU,CACR,CAAED,KAAM,eAAgBI,MAAO,MAC/B,CAAEJ,KAAM,UAAWI,MAAO,MAC1B,CAAEJ,KAAM,eAAgBI,MAAO,MAC/B,CAAEJ,KAAM,cAAeI,MAAO,QAGlC,CAAEJ,KAAM,WAAYI,MAAO,MAC3B,CAAEJ,KAAM,SAAUI,MAAO,OACzB,CAAEJ,KAAM,OAAQI,MAAO,MACvB,CAAEJ,KAAM,QAASI,MAAO,MACxB,CAAEJ,KAAM,UAAWI,MAAO,SAG9B,CACEJ,KAAM,MACNC,SAAU,CACR,CACED,KAAM,OACNC,SAAU,CACR,CAAED,KAAM,OAAQI,MAAO,MACvB,CAAEJ,KAAM,OAAQI,MAAO,OACvB,CAAEJ,KAAM,eAAgBI,MAAO,KAC/B,CAAEJ,KAAM,YAAaI,MAAO,KAC5B,CAAEJ,KAAM,gBAAiBI,MAAO,QAGpC,CACEJ,KAAM,WACNC,SAAU,CACR,CAAED,KAAM,gBAAiBI,MAAO,MAChC,CAAEJ,KAAM,eAAgBI,MAAO,MAC/B,CAAEJ,KAAM,UAAWI,MAAO,MAC1B,CAAEJ,KAAM,cAAeI,MAAO,MAC9B,CAAEJ,KAAM,cAAeI,MAAO,MAC9B,CAAEJ,KAAM,gBAAiBI,MAAO,MAChC,CAAEJ,KAAM,eAAgBI,MAAO,MAC/B,CAAEJ,KAAM,WAAYI,MAAO,KAC3B,CAAEJ,KAAM,iBAAkBI,MAAO,MACjC,CAAEJ,KAAM,mBAAoBI,MAAO,MACnC,CAAEJ,KAAM,iBAAkBI,MAAO,QAGrC,CACEJ,KAAM,OACNC,SAAU,CACR,CAAED,KAAM,OAAQI,MAAO,OACvB,CAAEJ,KAAM,WAAYI,MAAO,OAC3B,CAAEJ,KAAM,aAAcI,MAAO,OAC7B,CAAEJ,KAAM,aAAcI,MAAO,MAC7B,CAAEJ,KAAM,aAAcI,MAAO,OAC7B,CACEJ,KAAM,SACNC,SAAU,CACR,CAAED,KAAM,YAAaI,MAAO,KAC5B,CAAEJ,KAAM,eAAgBI,MAAO,MAC/B,CAAEJ,KAAM,YAAaI,MAAO,KAC5B,CAAEJ,KAAM,gBAAiBI,MAAO,QAGpC,CAAEJ,KAAM,eAAgBI,MAAO,OAC/B,CAAEJ,KAAM,OAAQI,MAAO,MACvB,CAAEJ,KAAM,cAAeI,MAAO,QAGlC,CACEJ,KAAM,SACNC,SAAU,CACR,CAAED,KAAM,YAAaI,MAAO,MAC5B,CAAEJ,KAAM,iBAAkBI,MAAO,MACjC,CAAEJ,KAAM,eAAgBI,MAAO,MAC/B,CAAEJ,KAAM,qBAAsBI,MAAO,QAGzC,CACEJ,KAAM,SACNC,SAAU,CACR,CAAED,KAAM,SAAUI,MAAO,OACzB,CAAEJ,KAAM,aAAcI,MAAO,MAC7B,CAAEJ,KAAM,cAAeI,MAAO,SAGlC,CACEJ,KAAM,WACNC,SAAU,CACR,CACED,KAAM,aACNC,SAAU,CACR,CAAED,KAAM,oBAAqBI,MAAO,MACpC,CAAEJ,KAAM,aAAcI,MAAO,MAC7B,CAAEJ,KAAM,oBAAqBI,MAAO,QAGxC,CACEJ,KAAM,UACNC,SAAU,CACR,CAAED,KAAM,eAAgBI,MAAO,MAC/B,CAAEJ,KAAM,UAAWI,MAAO,MAC1B,CAAEJ,KAAM,kBAAmBI,MAAO,MAClC,CAAEJ,KAAM,eAAgBI,MAAO,MAC/B,CAAEJ,KAAM,cAAeI,MAAO,QAGlC,CACEJ,KAAM,SACNC,SAAU,CACR,CAAED,KAAM,oBAAqBI,MAAO,MACpC,CAAEJ,KAAM,sBAAuBI,MAAO,MACtC,CAAEJ,KAAM,mBAAoBI,MAAO,QAGvC,CAAEJ,KAAM,YAAaI,MAAO,MAC5B,CACEJ,KAAM,QACNC,SAAU,CACR,CAAED,KAAM,UAAWI,MAAO,MAC1B,CAAEJ,KAAM,gBAAiBI,MAAO,MAChC,CAAEJ,KAAM,qBAAsBI,MAAO,QAGzC,CACEJ,KAAM,SACNC,SAAU,CACR,CAAED,KAAM,aAAcI,MAAO,MAC7B,CAAEJ,KAAM,oBAAqBI,MAAO,MACpC,CAAEJ,KAAM,eAAgBI,MAAO,MAC/B,CAAEJ,KAAM,sBAAuBI,MAAO,OACtC,CAAEJ,KAAM,mBAAoBI,MAAO,MACnC,CAAEJ,KAAM,sBAAuBI,MAAO,MACtC,CAAEJ,KAAM,mBAAoBI,MAAO,MACnC,CAAEJ,KAAM,qBAAsBI,MAAO,MACrC,CAAEJ,KAAM,SAAUI,MAAO,MACzB,CAAEJ,KAAM,qBAAsBI,MAAO,OACrC,CAAEJ,KAAM,YAAaI,MAAO,MAC5B,CAAEJ,KAAM,mBAAoBI,MAAO,OACnC,CAAEJ,KAAM,eAAgBI,MAAO,KAC/B,CAAEJ,KAAM,oBAAqBI,MAAO,MACpC,CAAEJ,KAAM,gBAAiBI,MAAO,QAGpC,CAAEJ,KAAM,WAAYI,MAAO,MAC3B,CAAEJ,KAAM,eAAgBI,MAAO,MAC/B,CAAEJ,KAAM,mBAAoBI,MAAO,MACnC,CAAEJ,KAAM,iBAAkBI,MAAO,MACjC,CAAEJ,KAAM,eAAgBI,MAAO,QAGnC,CAAEJ,KAAM,gBAAiBI,MAAO,Y,iCC7NjC,IAAKC,EAAZ,kC,SAAYA,O,iBAAAA,I,iBAAAA,I,uCAAAA,I,sCAAAA,M,uCClKZ,kCAAO,IAAMN,EAAO,CAClBC,KAAM,YACNC,SAAU,CACR,CACED,KAAM,uBACNI,MAAO,KACPD,KAAM,+BAER,CAAEH,KAAM,qBAAsBI,MAAO,MACrC,CAAEJ,KAAM,sBAAuBI,MAAO,MACtC,CAAEJ,KAAM,YAAaI,MAAO,Q,mKCU1BN,E,YAGJ,WAAYQ,GAAO,aACjB,cAAMA,IAAN,MACKC,MAAQ,CACXR,KAAMS,KAER,EAAKC,WAAaC,cALD,E,oCAQnBC,kBAAA,WACEC,QAAQC,IACN,sBACAC,KAAKL,YAAcK,KAAKL,WAAWM,U,EAIhCC,OAAP,WAAgB,WACd,OACE,gBAAC,WAAD,KACE,gBAAC,IAAD,MACG,YAAuB,IAApBC,EAAoB,EAApBA,MAAoB,EAAbC,OACT,OACE,gBAAC,IAAD,CACEC,IAAK,EAAKV,WACVW,GAAG,YACHH,MAAOA,EACPC,OAAQ,IACRnB,KAAM,EAAKQ,MAAMR,KACjBsB,UAAW,KACXnB,UAAU,aACVoB,cAAc,mBAEdC,aAAc,EACdC,OAAQ,SAACC,EAAOL,EAAIM,GAAZ,OAAsBd,QAAQC,IAAI,CAAEY,QAAOL,KAAIM,WACvDC,kBAAmB,SAACC,GAAD,OACjBhB,QAAQC,IAAIe,EAAQC,iBAEtBC,UAAW,CACTC,SAAU,GACVC,WAAY,EACZC,YAAa,EACbC,aAAc,GAEhBC,0BAA2BC,IAA0BC,YACrDC,mBAAoBC,YAClBC,KAEFC,WAAYpC,IAAWqC,qBAU/B,2BACE,qBAAGC,QAAS,kBAAM,EAAKC,SAAS,CAAE7C,KAAM8C,QAAxC,gBAEF,2BACE,qBAAGF,QAAS,kBAAM,EAAKlC,WAAWM,QAAQ+B,cAA1C,eAEF,2BACE,qBAAGH,QAAS,kBAAM,EAAKlC,WAAWM,QAAQgC,YAA1C,aAEF,2BACE,qBACEJ,QAAS,kBAAM/B,QAAQC,IAAI,EAAKJ,WAAWM,QAAQc,kBADrD,iB,GArEQnB,aAgFHsC,kBAAIC,EAAJD,CAAYlD,K,6KCzDfsC,E,mCAAAA,O,uBAAAA,I,8BAAAA,M,KAKZ,IAOIc,EAPEC,EAAqC,SACzCpB,EACAqB,GAEA,OAAQrB,EAAW,EAAKqB,EAAgB,GAIpCC,EAAe,SACnBC,EACAC,QAMG,IANHA,MAA6B,CAC3BC,YAAa,SACbC,WAAY,SACZ1B,SAAU,GACV2B,WAAY,UAITR,IACHA,EAASS,SAASC,cAAc,WAElC,IAAIC,EAAUX,EAAOY,WAAW,MAL7B,EAMuDP,EAAlDC,EANL,EAMKA,YAAaC,EANlB,EAMkBA,WAAY1B,EAN9B,EAM8BA,SAAU2B,EANxC,EAMwCA,WAC3C,OAAIG,GACFA,EAAQE,KAAUP,EAAlB,IAAiCC,EAAjC,IAA+C1B,EAA/C,OAA8D2B,EAA9D,IACO,CACLzC,MAAO4C,EAAQG,YAAYV,GAAMrC,MACjCC,OAAQa,IAGH,CAAEd,MAAO,EAAGC,OAAQa,IAIzBkC,EAAyC,GA8CzCC,EAAe,SAAC,GAQhB,IAPJC,EAOI,EAPJA,MACAC,EAMI,EANJA,UACArC,EAKI,EALJA,SACA3B,EAII,EAJJA,MACAiE,EAGI,EAHJA,YACAC,EAEI,EAFJA,eACAf,EACI,EADJA,MAEA,IAAKY,EACH,OAAO,KAGT,IAAMI,EAAYnE,EAAW+D,EAAN,IAAkB/D,EAAU+D,EAMnD,OAJEd,EAAakB,EAAWhB,GAAOtC,OAASqD,IAAmBD,EACvDF,EAAMK,MAAM,oBAAoBC,OAAOrE,GACvC,CAACmE,IAEWG,KAAI,SAACC,EAAcC,GACnC,OACE,yBACE7C,SAAUA,EACV8C,KAAMT,EACNU,IAAKF,EACLG,EAAG,EACHC,GAAIjD,GAvES,SACnBuB,EACAC,EACA0B,EACAC,QACG,IADHA,MAAmB,OAEnB,IAAMC,EAAkB,SAACC,GACvB,IAAMC,EAASpB,EAAemB,GAC9B,QAAeE,IAAXD,EACF,OAAOA,EAET,IAAME,EAAYlC,EAAa+B,EAAM7B,GAAOtC,MAE5C,OADAgD,EAAemB,GAAQG,EAChBA,GAGHC,EAA2B,GAC3BC,EAAYC,MAAMC,KAAKrC,GAEvBsC,EAAgBT,EAAgBD,GACtC,GAAID,EAAWW,EAAgB,EAC7B,OAAOtC,EAAKuC,OAAO,GAKrB,IAFA,IAAIC,EAAeF,EACfG,GAAc,EACTC,EAAI,EAAGA,EAAIP,EAAUQ,OAAQD,IAAK,CACzC,IAAMT,EAAYJ,EAAgBM,EAAUO,IAC5C,KAAIF,EAAeP,GAAaN,GAGzB,CACLO,EAAeQ,GAAKd,EACpBa,GAAc,EACd,MALAP,EAAeQ,GAAKP,EAAUO,GAC9BF,GAAgBP,EAQpB,OAAIQ,EACKP,EAAeU,KAAK,IAGtB5C,EA+BA6C,CAAaxB,EAAMpB,EAAOe,QAM7B8B,EAAmB,SAAC,GASpB,IARJpG,EAQI,EARJA,KACAiB,EAOI,EAPJA,MACAC,EAMI,EANJA,OACAkD,EAKI,EALJA,UACAiC,EAII,EAJJA,eACAC,EAGI,EAHJA,eACAC,EAEI,EAFJA,UACAhD,EACI,EADJA,MAEMiD,EAAgBF,EAClBlE,EAA0BqE,SAC1BF,EAEExE,EAAW2E,OAAOnD,EAAMxB,UACxB4E,EAAaxD,EACjBpB,EACAsE,EAAeO,WAAWX,QAGtBY,EAAc9E,EADK,EAEnB+E,EAAuBH,EAAaE,EAC1C,OAAI5F,EAAQ0F,GAAczF,EAAS2F,EAE/B,qBACEE,UAAS,iBACPP,IAAkBpE,EAA0BC,YACxCnB,EAAS2F,EACT,GAHG,KAMT,wBACEzF,GAAE,mBAAqBpB,EACvB+E,EAAG9D,EAAQ0F,EACXK,EAAG,EACH/F,MAAO0F,EACPzF,OAAQ2F,EACRhC,KAAK,OACLoC,OAAQ7C,EACR8C,iBACEV,IAAkBpE,EAA0BC,YACxCsE,EACA,GAHS,IAIXG,EAJW,IAIaA,IAE9B,wBACEjC,KAAMT,EACNW,EAAG9D,EAAQ0F,EAAaA,EAAa,EACrCK,EAAGH,EA7Bc,EA8BjBM,WAAW,SACX5D,MAAO,CACLC,YAAaD,EAAMC,YACnBC,WAAYF,EAAME,WAClB1B,SAAUwB,EAAMxB,SAChB2B,WAAYH,EAAMG,aAGnB2C,IAKF,MA4IMe,IAzIkC,SAAC,GA8B5C,IA7BJC,EA6BI,EA7BJA,QACAnH,EA4BI,EA5BJA,UACAoH,EA2BI,EA3BJA,iBACAjD,EA0BI,EA1BJA,YACAnD,EAyBI,EAzBJA,OACAqG,EAwBI,EAxBJA,qBACAnG,EAuBI,EAvBJA,GACAkF,EAsBI,EAtBJA,eACAnC,EAqBI,EArBJA,MACAkC,EAoBI,EApBJA,eACA1D,EAmBI,EAnBJA,QACAyB,EAkBI,EAlBJA,UACAoD,EAiBI,EAjBJA,UACAC,EAgBI,EAhBJA,IACArH,EAeI,EAfJA,MACAa,EAcI,EAdJA,MACAyG,EAaI,EAbJA,GACAC,EAYI,EAZJA,GACAC,EAWI,EAXJA,aACAC,EAUI,EAVJA,eACAC,EASI,EATJA,YACAC,EAQI,EARJA,GACAC,EAOI,EAPJA,GACAC,EAMI,EANJA,aACAC,EAKI,EALJA,eACAC,EAII,EAJJA,YACAC,EAGI,EAHJA,YACA7E,EAEI,EAFJA,MACApB,EACI,EADJA,0BAEMkG,OACY/C,IAAhBwC,EACIA,GACgB,IAAhBM,EACAP,EAAeH,GACfA,EACAY,OACYhD,IAAhB6C,EACIA,GACgB,IAAhBC,EACAF,EAAeH,GACfA,EACAjC,OAAyBR,IAAVrE,EAAsBA,EAAQ2G,GAAgBD,EAAKD,GAClEa,OACOjD,IAAXpE,EAAuBA,EAAS+G,GAAgBD,EAAKD,GAEjDS,GACY,IAAhBnE,IAA2C,IAAnBiC,EAA2B,UAAY,OAE3DvE,EAAW2E,OAAOnD,EAAMxB,UACxB4E,EAAaxD,EACjBpB,EACAsE,EAAeO,WAAWX,QAEtBwC,GAAqBlB,GAAwBlD,EAE7CqE,EACJ5C,GACCY,OAAOnD,EAAMtB,cAAgB,IAC7ByE,OAAOnD,EAAMrB,eAAiB,GAC3ByG,EAAYC,KAAKC,IACrB,EACAJ,GACEtG,IAA8BC,EAA0BqE,SACtDiC,EAAqB/B,EACrB+B,GAGN,OACE,qBACE3B,UAAS,aAAesB,EAAf,IAAqCC,EAArC,IACTlH,GAAE,GAAKA,EACPuB,QAAS0B,EAAc1B,EAAU,KACjCY,MAAO,CAAEiF,WAET,wBACEpH,GAAE,QAAUA,EACZH,MAAO6E,EACP5E,OAAQqH,EACRrI,UAAW4I,IAAW,OAAQ5I,GAC9BqD,MAAK,eACHsB,KAAMwC,EACNJ,OAAQ7C,GACLb,KAGP,4BAAUnC,GAAE,QAAUoG,EAAV,IAAuBpG,GACjC,wBAAMH,MAAO0H,EAAWzH,OAAQqH,KAElC,qBACErI,UAAW4I,IAAW,CAAEC,aAActB,IACtCuB,KAAMvB,EACNwB,OAAO,UAEP,wBACEC,SAAQ,aAAe1B,EAAf,IAA4BpG,EAA5B,IACR2F,UAAS,cAAexD,EAAMtB,aAAe,GAApC,KACPsB,EAAMvB,YAAc,GADb,IAGTuB,MAAO,CACLC,YAAaD,EAAMC,YACnBC,WAAYF,EAAME,WAClB1B,SAAUwB,EAAMxB,SAChB2B,WAAYH,EAAMG,aAGpB,gBAACQ,EAAD,CACEC,MAAOA,EACPC,UAAWA,EACXrC,SAAUA,EACV3B,MAAOA,EACPiE,YAAaA,EACbC,eAAgBqE,EAChBpF,MAAOA,MAIZkF,GACC,gBAACrC,EAAD,CACEpG,KAAMA,KACNiB,MAAO6E,EACP5E,OAAQqH,EACRhF,MAAOA,EACPa,UAAWA,EACXiC,eAAgBA,EAChBC,eAAgBA,EAChBC,UAAWpE,IAGf,6BACMgC,EADN,KACgB/D,EADhB,KAC0BiG,EAD1B,IAC4CiB,M,wNCvUrC6B,EAAwD,SAAC,GAGhE,IAFJjJ,EAEI,EAFJA,UACAwB,EACI,EADJA,MAEA,OAAKA,EAKH,uBAAKxB,UAAW4I,IAAW,sBAAuB5I,IAC/CwB,EAAMgD,KAAI,SAACC,EAAuBC,GAAxB,OACT,uBAAKE,IAAKF,GACR,qBACE1E,UAAU,0BACV4E,IAAKH,EAAKG,IACV1D,GAAE,GAAKuD,EAAKG,IACZnC,QAASgC,EAAKhC,QAAUgC,EAAKhC,aAAU2C,EACvC/B,MAAO,CAAEiF,OAAQ7D,EAAKhC,QAAU,UAAY,SAE3CgC,EAAKrB,MAEPsB,EAAQlD,EAAMuE,OAAS,EACtB,wBAAM/F,UAAU,gCAAhB,KACE,UAlBH,M,kBCjCEkJ,EAAb,kCACgBC,gBAAd,SACEC,GAEA,OAAIA,EAAKC,QAAUD,EAAKC,OAAOA,OACtBzI,KAAKuI,gBAAgBC,EAAKC,QAE5BD,EAAKE,UAPhB,EAUgBC,SAAd,SACEC,EACAC,GACA,WACIC,EAAQ,EASZ,OARIF,EAAIC,IACND,EAAIC,GAAoBE,SAAQ,SAAAC,GAC9B,IAAMC,EAAW,EAAKN,SAASK,EAAGH,GAC9BI,EAAWH,IACbA,EAAQG,MAIP,EAAIH,GAvBf,EA0BgBI,qBAAd,SAAmCC,EAAWC,EAAWC,GAKvD,IADA,IAAMC,EAAI,CAACH,EAAI,IAAKC,EAAI,IAAKC,EAAI,KACxBnE,EAAI,EAAGA,EAAIoE,EAAEnE,SAAUD,EAC1BoE,EAAEpE,IAAM,OACVoE,EAAEpE,GAAKoE,EAAEpE,GAAK,MAEdoE,EAAEpE,GAAK4C,KAAKyB,KAAKD,EAAEpE,GAAK,MAAS,MAAO,KAK5C,MAFkB,MAASoE,EAAE,GAAK,MAASA,EAAE,GAAK,MAASA,EAAE,GAE1C,GAAM,QAAU,SAxCvC,EA2CgBE,+BAAd,SACEC,GAEA,IAAKA,EACH,MAAO,QAET,IAAMC,EAAWC,YAAIF,GACrB,OAAIC,EACKpB,EAAMY,qBAAqBQ,EAASP,EAAGO,EAASN,EAAGM,EAASL,QADrE,GAlDJ,KCuBMO,E,YAiCJ,WAAYpK,GAAwC,OAClD,cAAMA,IAAN,MAuQMqK,yBAA2B,SAACC,GAClC,EAAKC,QAAQnE,OAAOkE,EAAGE,cAAc1J,MAzQa,EA4Q5C2J,aAAe,SAACH,GACtB,EAAKC,QAAQG,SAASJ,EAAGE,cAAc1J,MA7QW,IAG1CH,EAAwCX,EAAxCW,MAAOC,EAAiCZ,EAAjCY,OAAQnB,EAAyBO,EAAzBP,KAAMkL,EAAmB3K,EAAnB2K,eAHqB,OAKlD,EAAKC,iBAAiBjK,EAAOC,EAAQnB,GAGrC,EAAKQ,MAAQ,CACXW,SACAD,QACAlB,OACA6H,aAAc,EACdK,aAAc,EACdJ,eAAgBsD,cAAcC,MAAM,CAAC,EAAGnK,IACxCiH,eAAgBiD,cAAcC,MAAM,CAAC,EAAGlK,IACxCkH,aAAa,EAEbiD,gBAAiB,CACf,CACE/H,KAAMvD,EAAKkL,GACXnG,IAAK,IAGTwG,WAAY,EACZC,aAAc,EAAKC,SACjB,EAAKC,WAEPC,WAAY,EAAKC,OAAO1F,QA5BwB,E,oCAgC7CtF,kBAAP,WAA2B,IACjBgB,EAAsBb,KAAKR,MAA3BqB,kBACRb,KAAK+J,QAAQ,GACTlJ,GACFA,EAAkBb,O,EAIf8K,iCAAP,SACEC,GACA,IACQ5K,EAAkB4K,EAAlB5K,MAAOC,EAAW2K,EAAX3K,OACXA,IAAWJ,KAAKR,MAAMY,QAAUD,IAAUH,KAAKR,MAAMW,OACvDH,KAAK8B,SAAS,CACZ3B,QACAC,SACA2G,eAAgBsD,cAAcC,MAAM,CAAC,EAAGnK,IACxCiH,eAAgBiD,cAAcC,MAAM,CAAC,EAAGlK,IACxCqK,aAAczK,KAAK0K,SACjB1K,KAAK2K,c,EAMNzK,OAAP,WAAgB,aACiDF,KAAKP,MAA5DU,EADM,EACNA,MAAOC,EADD,EACCA,OAAQmK,EADT,EACSA,gBAAiBE,EAD1B,EAC0BA,aAAcxL,EADxC,EACwCA,KADxC,EAUVe,KAAKR,MANPwL,EAJY,EAIZA,aACAC,EALY,EAKZA,SACA7L,EANY,EAMZA,UACAyJ,EAPY,EAOZA,mBACAqC,EARY,EAQZA,oBACAC,EATY,EASZA,kBAGFnL,KAAKoK,iBAAiBjK,EAAOC,EAAQnB,GAErC,IAAImM,EAAqC,GAoBzC,OAlB2B,SAArBC,EACJC,EACA3K,GAEAyK,EAAaA,EAAWzH,OAAO,EAAK4H,SAASD,IACzC3K,EANW,GAQX2K,EAASE,eAAe3C,IACxByC,EAASzC,GAAoB1D,OAAS,GAEtCmG,EAASzC,GAAoBE,SAAQ,SAAC0C,GACpCJ,EAAmBI,EAAS9K,EAAQ,MAK5C0K,CAAmBZ,EAAc,GAG/B,uBAAKrL,UAAWA,IACS,IAAtB+L,EACC,gBAAC,EAAD,CAAYvK,MAAO2J,EAAiBnL,UAAW8L,IAC7C,KACJ,uBACE9L,UAAW4I,IAAWgD,GACtB5K,OAAQA,EACRD,MAAOA,EACPsC,MAAK,iBAAOwI,IAEXG,K,EAMDhB,iBAAR,SACEjK,EACAC,EACAnB,GACA,MAQIe,KAAKR,MANPkM,EAFF,EAEEA,gBACA7C,EAHF,EAGEA,mBACApI,EAJF,EAIEA,aACAkL,EALF,EAKEA,YACAhK,EANF,EAMEA,WACAH,EAPF,EAOEA,mBAIFxB,KAAK0K,SAAWkB,cACbC,KAAK,CAAC1L,EAAOC,IACb0L,KAAKC,KACLC,aAAa,GACb9K,WAAW,IACXT,aAAaA,GACbwL,OAAM,GAITjM,KAAK2K,UAAYuB,YAAUjN,GACxBkN,KAAI,SAACC,GAAD,OAAOA,EAAEV,MACbW,MACC,SAACC,EAAGjD,GAAJ,OAAUA,EAAEjJ,OAASkM,EAAElM,QAAUiJ,EAAEqC,GAAmBY,EAAEZ,MAI5D,IAUI1C,EAVAuD,EAAe,EAWnB,OAVAvM,KAAK6K,OAAS7K,KAAK0K,SAAS1K,KAAK2K,WAC9B6B,MAAK,SAAC3I,GACLA,EAAK6E,SAAW6D,OAEjBE,cAGHzM,KAAK0M,qBAAuBC,YAAOhB,GAG3BhK,GACN,KAAKpC,IAAWqN,MACd5D,EAAI,CAAC,EAAGV,EAAMK,SAA2B1J,EAAM4J,GAAsB,GACrE,MACF,KAAKtJ,IAAWsN,MACd7D,EAAI8D,YAAO9M,KAAK6K,QAAQ,SAACkC,GACvB,GAAiB,OAAbA,EAAEtE,OACJ,OAAOsE,EAAErB,MAGb,MACF,KAAKnM,IAAW+F,iBACd0D,EAAI8D,YAAO9M,KAAK6K,QAAQ,SAACkC,GAAD,OACT,OAAbA,EAAEtE,OAAkBsE,EAAEN,cAActH,OAAS,KAE/C,MACF,KAAK5F,IAAWqC,gBACdoH,EAAI,CAAC/J,EAAK4J,GAAsB5J,EAAK4J,GAAoB1D,OAAS,EAAG,GAMzEnF,KAAKgN,sBAAwBxL,EAAmByL,OAAOjE,I,EAGjDuC,SAAR,SAAiB/C,GAAwD,MAanExI,KAAKR,MAXHkH,EAFiE,EAErEpG,GACAC,EAHqE,EAGrEA,UACA2M,EAJqE,EAIrEA,UACAzG,EALqE,EAKrEA,qBACAzF,EANqE,EAMrEA,UACAR,EAPqE,EAOrEA,cACAkL,EARqE,EAQrEA,gBACA7C,EATqE,EASrEA,mBACAsB,EAVqE,EAUrEA,eACAgD,EAXqE,EAWrEA,eACA9L,EAZqE,EAYrEA,0BAZqE,EAuBnErB,KAAKP,MAPPmL,EAhBqE,EAgBrEA,WACAJ,EAjBqE,EAiBrEA,WACA1D,EAlBqE,EAkBrEA,aACAC,EAnBqE,EAmBrEA,eACAI,EApBqE,EAoBrEA,aACAC,EArBqE,EAqBrEA,eACAE,EAtBqE,EAsBrEA,YAGMoB,EAAmCF,EAAnCE,SAAUzJ,EAAyBuJ,EAAzBvJ,KAAM2H,EAAmB4B,EAAnB5B,GAAIC,EAAe2B,EAAf3B,GAAII,EAAWuB,EAAXvB,GAAIC,EAAOsB,EAAPtB,GAE9BhI,EAAOD,EAAKkL,GACZxD,EAAM1H,EAAKkO,GACXC,EAAwBnO,EAAI,UAE5BsE,KACJiF,EAAKK,IAAuBL,EAAKK,GAAoB1D,OAAS,GAG1DkI,EAAiB,IAAIrN,KAAK0M,qBAC9BlE,EAAKkD,IADa,IAEfnL,EAFe,IAIdgF,EAAiBiD,EAAKiE,cAActH,OAAS,EAvCoB,EAyCxCnF,KAAKsN,mBAClC9E,EACAjD,GAFMgB,EAzC+D,EAyC/DA,QAASjD,EAzCsD,EAyCtDA,UAKXkC,EAAiBkD,IAAa8B,EAEpC,OACE,gBAAClE,EAAA,EAAD,CACEC,QAASA,EACTnH,UAAW4I,IAAWxH,EAAe4M,GACrC3K,MAAK,eACHC,YAAa,SACbC,WAAY,SACZ1B,SAAU,GACV2B,WAAY,SACT5B,GAELwF,iBAAkBoE,EAClBrH,YAAaA,EACbkD,qBAAsBA,EACtBnG,GAAIoI,EACJlD,eAAgBA,EAChBxB,IAAK0E,EACLrF,MAAOnE,EACPA,KAAMA,EACNqG,eAAgBA,EAChB1D,QAAU2D,OAAqChB,EAApBxE,KAAKiK,aAChC3G,UAAWA,EACXoD,UAAWA,EACXC,IAAKA,EACLrH,OAAQ4N,GAAaG,EACrBzG,GAAIA,EACJC,GAAIA,EACJC,aAAcA,EACdC,eAAgBA,EAChBE,GAAIA,EACJC,GAAIA,EACJC,aAAcA,EACdC,eAAgBA,EAChBE,YAAaA,EACbjG,0BAA2BA,K,EAazBiM,mBAAR,SACE9E,EACAjD,GACA,IAGIkE,EAHJ,EACwCzJ,KAAKR,MAArCmC,EADR,EACQA,WAAY+J,EADpB,EACoBA,gBAGpB,OAAQ/J,GACN,KAAKpC,IAAWqN,MACdnD,EAAkBzJ,KAAKgN,sBAAsBxE,EAAKM,OAC9B,OAAhBN,EAAKC,SACPgB,EAAkBzJ,KAAKgN,sBAAsB,IAE/C,MACF,KAAKzN,IAAWsN,MACdpD,EAAkBzJ,KAAKgN,sBAAsBxE,EAAKkD,IAC9B,OAAhBlD,EAAKC,SACPgB,EAAkBzJ,KAAKgN,sBAAsB,IAE/C,MACF,KAAKzN,IAAW+F,iBACdmE,EAAkBzJ,KAAKgN,sBAAsBzH,GACzB,OAAhBiD,EAAKC,SACPgB,EAAkBzJ,KAAKgN,sBAAsB,IAE/C,MACF,KAAKzN,IAAWqC,gBACd,IAAM2L,EAA0BvN,KAAKgN,sBACnC1E,EAAMC,gBAAkCC,IAGxCiB,EADEjB,EAAKM,MAAQ,EACGuB,cACf4C,OAAO,CAAC,EAAGzE,GAAQA,EAAKrJ,SAAWqJ,EAAKrJ,SAASgG,OAAS,IAC1DqI,YAAYC,KACZnD,MAAM,CAAC,QAASiD,GAHDlD,CAIhB/B,EAAMC,gBAAkCC,IAGxB+E,EAEA,OAAhB/E,EAAKC,SACPgB,EAAkBzJ,KAAKgN,sBAAsB,IAMnD,MAAO,CACLzG,QAASkD,EACTnG,UAAWgF,EAAMkB,+BAA+BC,K,EAI5CM,QAAR,SAAgB2D,GAAgB,aAC4B1N,KAAKP,MAAvDsH,EADsB,EACtBA,eAAgBK,EADM,EACNA,eAAgBjH,EADV,EACUA,MAAOC,EADjB,EACiBA,OAEvCM,EAAWV,KAAKR,MAAhBkB,OAEFiN,EAAc3N,KAAK6K,OACtB+C,QAAO,SAAC/J,GACP,OAAOA,EAAK6E,SAAS5C,aAAe4H,EAAO5H,cAE5C+H,MACH,GAAIF,EAAa,CACf,IAAM1J,EAAI0J,EAAY/G,GAChBV,EAAIyH,EAAY1G,GAChB6G,EAAKH,EAAY9G,GAAK8G,EAAY/G,GAClC1C,EAAKyJ,EAAYzG,GAAKyG,EAAY1G,GAClCH,EAAe3G,EAAQ2N,EACvB3G,EAAe/G,EAAS8D,EACxBqG,EAAkBvK,KAAK0K,SAAS1K,KAAK2K,WACxCoD,KAAKJ,GACL/J,KACC,YAGwD,IAFtD3E,EAEsD,EAFtDA,KACAyJ,EACsD,EADtDA,SAEA,MAAO,CACLlG,KAAMvD,EAAI,KACV+E,IAAK0E,EACL7G,QACE6G,IAAagF,EAAS,EAAK7D,8BAA2BrF,MAI5D9D,GACFA,EAAOiN,EAAY7E,MAAO4E,EAAQnD,GAEpCvK,KAAK8B,SAAS,CACZgF,eACAK,eACAJ,eAAgBA,EAAekG,OAAO,CAAChJ,EAAGA,EAAI6J,IAC9C1G,eAAgBA,EAAe6F,OAAO,CAAC/G,EAAGA,EAAIhC,IAC9CoD,YAAoC,OAAvBqG,EAAYlF,OACzB+B,WAAYkD,EACZjD,aAAckD,EACdpD,yBAGFzK,QAAQkO,KAAK,qBAAuBN,I,EAIjC1L,UAAP,WACEhC,KAAK+J,QAAQ,I,EAGR9H,QAAP,WAAiB,IACPuI,EAAexK,KAAKP,MAApB+K,WACFC,EAAezK,KAAK6K,OACvB+C,QAAO,SAAC/J,GACP,OAAOA,EAAK6E,WAAa8B,KAE1BqD,MAEDpD,GACAA,EAAahC,aACoBjE,IAAjCiG,EAAahC,OAAOC,UAEpB1I,KAAK+J,QAAQU,EAAahC,OAAOC,W,EAI9B3H,aAAP,WAEE,OADyBf,KAAKP,MAAtBgL,aACY3B,O,GA9agBlJ,aAAlCgK,EAKUqE,aAAkC,CAC9C3N,GAAI,YACJrB,KAAM,KACNmB,OAAQ,IACRD,MAAO,IACPwL,YAAa,KACbpL,UAAW,KACX4K,mBAAmB,EACnBxJ,WAAYpC,IAAWqC,gBACvBnB,aAAc,EACde,mBAAoBC,YAAgByM,KACpC/D,eAAgB,OAChBgD,eAAgB,OAChBzB,gBAAiB,QACjB7C,mBAAoB,WACpBxH,0BAA2BC,IAA0BC,aA8Z1CqI","file":"component---src-pages-index-tsx-96708495550204bc8bd9.js","sourcesContent":["import App from \"../App\";\r\nexport default App;\r\n","// Format\r\n// name: name of the file or folder\r\n// type: folder or file\r\n// value: number of bytes of the doc (calculated at folder level by d3)\r\n// children: sub files or sub folders\r\n\r\nexport const data = {\r\n  name: \"flare\",\r\n  children: [\r\n    {\r\n      name: \"analytics\",\r\n      className: \"AppTreeMap__analytics\",\r\n      link: \"https://blog.josequinto.com\",\r\n      children: [\r\n        {\r\n          name: \"cluster\",\r\n          children: [\r\n            {\r\n              name: \"AgglomerativeCluster\",\r\n              value: 3938,\r\n              link: \"https://blog.josequinto.com\"\r\n            },\r\n            { name: \"CommunityStructure\", value: 3812 },\r\n            { name: \"HierarchicalCluster\", value: 6714 },\r\n            { name: \"MergeEdge\", value: 743 }\r\n          ]\r\n        },\r\n        {\r\n          name: \"graph\",\r\n          children: [\r\n            { name: \"BetweennessCentrality\", value: 3534 },\r\n            { name: \"LinkDistance\", value: 5731 },\r\n            { name: \"MaxFlowMinCut\", value: 7840 },\r\n            { name: \"ShortestPaths\", value: 5914 },\r\n            { name: \"SpanningTree\", value: 3416 }\r\n          ]\r\n        },\r\n        {\r\n          name: \"optimization\",\r\n          children: [{ name: \"AspectRatioBanker\", value: 7074 }]\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      name: \"animate\",\r\n      children: [\r\n        { name: \"Easing\", value: 17010 },\r\n        { name: \"FunctionSequence\", value: 5842 },\r\n        {\r\n          name: \"interpolate\",\r\n          children: [\r\n            { name: \"ArrayInterpolator\", value: 1983 },\r\n            { name: \"ColorInterpolator\", value: 2047 },\r\n            { name: \"DateInterpolator\", value: 1375 },\r\n            { name: \"Interpolator\", value: 8746 },\r\n            { name: \"MatrixInterpolator\", value: 2202 },\r\n            { name: \"NumberInterpolator\", value: 1382 },\r\n            { name: \"ObjectInterpolator\", value: 1629 },\r\n            { name: \"PointInterpolator\", value: 1675 },\r\n            { name: \"RectangleInterpolator\", value: 2042 }\r\n          ]\r\n        },\r\n        { name: \"ISchedulable\", value: 1041 },\r\n        { name: \"Parallel\", value: 5176 },\r\n        { name: \"Pause\", value: 449 },\r\n        { name: \"Scheduler\", value: 5593 },\r\n        { name: \"Sequence\", value: 5534 },\r\n        { name: \"Transition\", value: 9201 },\r\n        { name: \"Transitioner\", value: 19975 },\r\n        { name: \"TransitionEvent\", value: 1116 },\r\n        { name: \"Tween\", value: 6006 }\r\n      ]\r\n    },\r\n    {\r\n      name: \"data\",\r\n      children: [\r\n        {\r\n          name: \"converters\",\r\n          children: [\r\n            { name: \"Converters\", value: 721 },\r\n            { name: \"DelimitedTextConverter\", value: 4294 },\r\n            { name: \"GraphMLConverter\", value: 9800 },\r\n            { name: \"IDataConverter\", value: 1314 },\r\n            { name: \"JSONConverter\", value: 2220 }\r\n          ]\r\n        },\r\n        { name: \"DataField\", value: 1759 },\r\n        { name: \"DataSchema\", value: 2165 },\r\n        { name: \"DataSet\", value: 586 },\r\n        { name: \"DataSource\", value: 3331 },\r\n        { name: \"DataTable\", value: 772 },\r\n        { name: \"DataUtil\", value: 3322 }\r\n      ]\r\n    },\r\n    {\r\n      name: \"display\",\r\n      children: [\r\n        { name: \"DirtySprite\", value: 8833 },\r\n        { name: \"LineSprite\", value: 1732 },\r\n        { name: \"RectSprite\", value: 3623 },\r\n        { name: \"TextSprite\", value: 10066 }\r\n      ]\r\n    },\r\n    {\r\n      name: \"flex\",\r\n      children: [{ name: \"FlareVis\", value: 4116 }]\r\n    },\r\n    {\r\n      name: \"physics\",\r\n      children: [\r\n        { name: \"DragForce\", value: 1082 },\r\n        { name: \"GravityForce\", value: 1336 },\r\n        { name: \"IForce\", value: 319 },\r\n        { name: \"NBodyForce\", value: 10498 },\r\n        { name: \"Particle\", value: 2822 },\r\n        { name: \"Simulation\", value: 9983 },\r\n        { name: \"Spring\", value: 2213 },\r\n        { name: \"SpringForce\", value: 1681 }\r\n      ]\r\n    },\r\n    {\r\n      name: \"query\",\r\n      children: [\r\n        { name: \"AggregateExpression\", value: 1616 },\r\n        { name: \"And\", value: 1027 },\r\n        { name: \"Arithmetic\", value: 3891 },\r\n        { name: \"Average\", value: 891 },\r\n        { name: \"BinaryExpression\", value: 2893 },\r\n        { name: \"Comparison\", value: 5103 },\r\n        { name: \"CompositeExpression\", value: 3677 },\r\n        { name: \"Count\", value: 781 },\r\n        { name: \"DateUtil\", value: 4141 },\r\n        { name: \"Distinct\", value: 933 },\r\n        { name: \"Expression\", value: 5130 },\r\n        { name: \"ExpressionIterator\", value: 3617 },\r\n        { name: \"Fn\", value: 3240 },\r\n        { name: \"If\", value: 2732 },\r\n        { name: \"IsA\", value: 2039 },\r\n        { name: \"Literal\", value: 1214 },\r\n        { name: \"Match\", value: 3748 },\r\n        { name: \"Maximum\", value: 843 },\r\n        {\r\n          name: \"methods\",\r\n          children: [\r\n            { name: \"add\", value: 593 },\r\n            { name: \"and\", value: 330 },\r\n            { name: \"average\", value: 287 },\r\n            { name: \"count\", value: 277 },\r\n            { name: \"distinct\", value: 292 },\r\n            { name: \"div\", value: 595 },\r\n            { name: \"eq\", value: 594 },\r\n            { name: \"fn\", value: 460 },\r\n            { name: \"gt\", value: 603 },\r\n            { name: \"gte\", value: 625 },\r\n            { name: \"iff\", value: 748 },\r\n            { name: \"isa\", value: 461 },\r\n            { name: \"lt\", value: 597 },\r\n            { name: \"lte\", value: 619 },\r\n            { name: \"max\", value: 283 },\r\n            { name: \"min\", value: 283 },\r\n            { name: \"mod\", value: 591 },\r\n            { name: \"mul\", value: 603 },\r\n            { name: \"neq\", value: 599 },\r\n            { name: \"not\", value: 386 },\r\n            { name: \"or\", value: 323 },\r\n            { name: \"orderby\", value: 307 },\r\n            { name: \"range\", value: 772 },\r\n            { name: \"select\", value: 296 },\r\n            { name: \"stddev\", value: 363 },\r\n            { name: \"sub\", value: 600 },\r\n            { name: \"sum\", value: 280 },\r\n            { name: \"update\", value: 307 },\r\n            { name: \"variance\", value: 335 },\r\n            { name: \"where\", value: 299 },\r\n            { name: \"xor\", value: 354 },\r\n            { name: \"_\", value: 264 }\r\n          ]\r\n        },\r\n        { name: \"Minimum\", value: 843 },\r\n        { name: \"Not\", value: 1554 },\r\n        { name: \"Or\", value: 970 },\r\n        { name: \"Query\", value: 13896 },\r\n        { name: \"Range\", value: 1594 },\r\n        { name: \"StringUtil\", value: 4130 },\r\n        { name: \"Sum\", value: 791 },\r\n        { name: \"Variable\", value: 1124 },\r\n        { name: \"Variance\", value: 1876 },\r\n        { name: \"Xor\", value: 1101 }\r\n      ]\r\n    },\r\n    {\r\n      name: \"scale\",\r\n      children: [\r\n        { name: \"IScaleMap\", value: 2105 },\r\n        { name: \"LinearScale\", value: 1316 },\r\n        { name: \"LogScale\", value: 3151 },\r\n        { name: \"OrdinalScale\", value: 3770 },\r\n        { name: \"QuantileScale\", value: 2435 },\r\n        { name: \"QuantitativeScale\", value: 4839 },\r\n        { name: \"RootScale\", value: 1756 },\r\n        { name: \"Scale\", value: 4268 },\r\n        { name: \"ScaleType\", value: 1821 },\r\n        { name: \"TimeScale\", value: 5833 }\r\n      ]\r\n    },\r\n    {\r\n      name: \"util\",\r\n      children: [\r\n        { name: \"Arrays\", value: 8258 },\r\n        { name: \"Colors\", value: 10001 },\r\n        { name: \"Dates\", value: 8217 },\r\n        { name: \"Displays\", value: 12555 },\r\n        { name: \"Filter\", value: 2324 },\r\n        { name: \"Geometry\", value: 10993 },\r\n        {\r\n          name: \"heap\",\r\n          children: [\r\n            { name: \"FibonacciHeap\", value: 9354 },\r\n            { name: \"HeapNode\", value: 1233 }\r\n          ]\r\n        },\r\n        { name: \"IEvaluable\", value: 335 },\r\n        { name: \"IPredicate\", value: 383 },\r\n        { name: \"IValueProxy\", value: 874 },\r\n        {\r\n          name: \"math\",\r\n          children: [\r\n            { name: \"DenseMatrix\", value: 3165 },\r\n            { name: \"IMatrix\", value: 2815 },\r\n            { name: \"SparseMatrix\", value: 3366 }\r\n          ]\r\n        },\r\n        { name: \"Maths\", value: 17705 },\r\n        { name: \"Orientation\", value: 1486 },\r\n        {\r\n          name: \"palette\",\r\n          children: [\r\n            { name: \"ColorPalette\", value: 6367 },\r\n            { name: \"Palette\", value: 1229 },\r\n            { name: \"ShapePalette\", value: 2059 },\r\n            { name: \"SizePalette\", value: 2291 }\r\n          ]\r\n        },\r\n        { name: \"Property\", value: 5559 },\r\n        { name: \"Shapes\", value: 19118 },\r\n        { name: \"Sort\", value: 6887 },\r\n        { name: \"Stats\", value: 6557 },\r\n        { name: \"Strings\", value: 22026 }\r\n      ]\r\n    },\r\n    {\r\n      name: \"vis\",\r\n      children: [\r\n        {\r\n          name: \"axis\",\r\n          children: [\r\n            { name: \"Axes\", value: 1302 },\r\n            { name: \"Axis\", value: 24593 },\r\n            { name: \"AxisGridLine\", value: 652 },\r\n            { name: \"AxisLabel\", value: 636 },\r\n            { name: \"CartesianAxes\", value: 6703 }\r\n          ]\r\n        },\r\n        {\r\n          name: \"controls\",\r\n          children: [\r\n            { name: \"AnchorControl\", value: 2138 },\r\n            { name: \"ClickControl\", value: 3824 },\r\n            { name: \"Control\", value: 1353 },\r\n            { name: \"ControlList\", value: 4665 },\r\n            { name: \"DragControl\", value: 2649 },\r\n            { name: \"ExpandControl\", value: 2832 },\r\n            { name: \"HoverControl\", value: 4896 },\r\n            { name: \"IControl\", value: 763 },\r\n            { name: \"PanZoomControl\", value: 5222 },\r\n            { name: \"SelectionControl\", value: 7862 },\r\n            { name: \"TooltipControl\", value: 8435 }\r\n          ]\r\n        },\r\n        {\r\n          name: \"data\",\r\n          children: [\r\n            { name: \"Data\", value: 20544 },\r\n            { name: \"DataList\", value: 19788 },\r\n            { name: \"DataSprite\", value: 10349 },\r\n            { name: \"EdgeSprite\", value: 3301 },\r\n            { name: \"NodeSprite\", value: 19382 },\r\n            {\r\n              name: \"render\",\r\n              children: [\r\n                { name: \"ArrowType\", value: 698 },\r\n                { name: \"EdgeRenderer\", value: 5569 },\r\n                { name: \"IRenderer\", value: 353 },\r\n                { name: \"ShapeRenderer\", value: 2247 }\r\n              ]\r\n            },\r\n            { name: \"ScaleBinding\", value: 11275 },\r\n            { name: \"Tree\", value: 7147 },\r\n            { name: \"TreeBuilder\", value: 9930 }\r\n          ]\r\n        },\r\n        {\r\n          name: \"events\",\r\n          children: [\r\n            { name: \"DataEvent\", value: 2313 },\r\n            { name: \"SelectionEvent\", value: 1880 },\r\n            { name: \"TooltipEvent\", value: 1701 },\r\n            { name: \"VisualizationEvent\", value: 1117 }\r\n          ]\r\n        },\r\n        {\r\n          name: \"legend\",\r\n          children: [\r\n            { name: \"Legend\", value: 20859 },\r\n            { name: \"LegendItem\", value: 4614 },\r\n            { name: \"LegendRange\", value: 10530 }\r\n          ]\r\n        },\r\n        {\r\n          name: \"operator\",\r\n          children: [\r\n            {\r\n              name: \"distortion\",\r\n              children: [\r\n                { name: \"BifocalDistortion\", value: 4461 },\r\n                { name: \"Distortion\", value: 6314 },\r\n                { name: \"FisheyeDistortion\", value: 3444 }\r\n              ]\r\n            },\r\n            {\r\n              name: \"encoder\",\r\n              children: [\r\n                { name: \"ColorEncoder\", value: 3179 },\r\n                { name: \"Encoder\", value: 4060 },\r\n                { name: \"PropertyEncoder\", value: 4138 },\r\n                { name: \"ShapeEncoder\", value: 1690 },\r\n                { name: \"SizeEncoder\", value: 1830 }\r\n              ]\r\n            },\r\n            {\r\n              name: \"filter\",\r\n              children: [\r\n                { name: \"FisheyeTreeFilter\", value: 5219 },\r\n                { name: \"GraphDistanceFilter\", value: 3165 },\r\n                { name: \"VisibilityFilter\", value: 3509 }\r\n              ]\r\n            },\r\n            { name: \"IOperator\", value: 1286 },\r\n            {\r\n              name: \"label\",\r\n              children: [\r\n                { name: \"Labeler\", value: 9956 },\r\n                { name: \"RadialLabeler\", value: 3899 },\r\n                { name: \"StackedAreaLabeler\", value: 3202 }\r\n              ]\r\n            },\r\n            {\r\n              name: \"layout\",\r\n              children: [\r\n                { name: \"AxisLayout\", value: 6725 },\r\n                { name: \"BundledEdgeRouter\", value: 3727 },\r\n                { name: \"CircleLayout\", value: 9317 },\r\n                { name: \"CirclePackingLayout\", value: 12003 },\r\n                { name: \"DendrogramLayout\", value: 4853 },\r\n                { name: \"ForceDirectedLayout\", value: 8411 },\r\n                { name: \"IcicleTreeLayout\", value: 4864 },\r\n                { name: \"IndentedTreeLayout\", value: 3174 },\r\n                { name: \"Layout\", value: 7881 },\r\n                { name: \"NodeLinkTreeLayout\", value: 12870 },\r\n                { name: \"PieLayout\", value: 2728 },\r\n                { name: \"RadialTreeLayout\", value: 12348 },\r\n                { name: \"RandomLayout\", value: 870 },\r\n                { name: \"StackedAreaLayout\", value: 9121 },\r\n                { name: \"TreeMapLayout\", value: 9191 }\r\n              ]\r\n            },\r\n            { name: \"Operator\", value: 2490 },\r\n            { name: \"OperatorList\", value: 5248 },\r\n            { name: \"OperatorSequence\", value: 4190 },\r\n            { name: \"OperatorSwitch\", value: 2581 },\r\n            { name: \"SortOperator\", value: 2023 }\r\n          ]\r\n        },\r\n        { name: \"Visualization\", value: 16540 }\r\n      ]\r\n    }\r\n  ]\r\n};\r\n","import { ScaleSequential } from \"d3-scale\";\r\nimport TreeMap from \"../TreeMap\";\r\nimport { IBreadcrumbItem } from \"../Breadcrumb\";\r\nimport { NumberOfChildrenPlacement } from \"../Node\";\r\n\r\nexport interface ITreeMapProps<TreeMapInputData> {\r\n  /**\r\n   * TreeMap id, will be use for create customId for each node\r\n   */\r\n  id: string;\r\n\r\n  /**\r\n   * TreeMap width\r\n   */\r\n  width: number;\r\n\r\n  /**\r\n   * TreeMap height\r\n   */\r\n  height: number;\r\n\r\n  /**\r\n   * TreeMap data. Normally should have at least name, value and children.\r\n   *\r\n   * Example:\r\n   *  interface TreeMapInPutData {\r\n   *      name: string;\r\n   *      value?: number;\r\n   *      children?: Array<TreeMapInPutData>;\r\n   *      className?: string;\r\n   *  }\r\n   */\r\n  data: TreeMapInputData;\r\n\r\n  /*\r\n        Unit for values. For example MB\r\n    */\r\n  valueUnit?: string;\r\n\r\n  /*\r\n   * Format for the values\r\n   * https://github.com/d3/d3-format#format\r\n   */\r\n  valueFormat?: string;\r\n\r\n  /**\r\n   * Hide breadcrumb.\r\n   *\r\n   * If you app doesn't use breadcrumb, you can pass down a ref\r\n   * and use the methods: zoomOut, resetZoom\r\n   */\r\n  disableBreadcrumb?: boolean;\r\n\r\n  /**\r\n   * There are few color strategies for nodes:\r\n   *    Depth: different color per depth\r\n   *    Value: different color depends on how big / small is the value\r\n   *    NumberOfChildren: different color depends on how many children node has\r\n   *    OneEachChildren: one color per each top children, then range of colors from white to that one\r\n   */\r\n  colorModel?: ColorModel;\r\n\r\n  /**\r\n   * Don't show the top right corner box indicating number of children\r\n   */\r\n  hideNumberOfChildren?: boolean;\r\n\r\n  /**\r\n   * Don't show the value\r\n   */\r\n  hideValue?: boolean;\r\n\r\n  /**\r\n   * Overrides top div main class\r\n   */\r\n  className?: string;\r\n\r\n  /**\r\n   * Overrides svg class\r\n   */\r\n  svgClassName?: string;\r\n\r\n  /**\r\n   * Overrides node class\r\n   */\r\n  nodeClassName?: string;\r\n\r\n  /**\r\n   * Overrides breadcrumb class\r\n   */\r\n  breadCrumbClassName?: string;\r\n\r\n  /**\r\n   * Overrides svg style\r\n   */\r\n  svgStyle?: React.CSSProperties;\r\n\r\n  /**\r\n   * Overrides node style\r\n   */\r\n  nodeStyle?: React.CSSProperties;\r\n\r\n  /**\r\n   * Padding between nodes ( calculated by D3 )\r\n   */\r\n  paddingInner?: number;\r\n\r\n  /**\r\n   * Custom ScaleSequential from D3\r\n   */\r\n  customD3ColorScale?: ScaleSequential<string>;\r\n\r\n  /**\r\n   * Name for the property `name` included in data\r\n   *\r\n   * @default \"name\"\r\n   */\r\n  namePropInData?: string;\r\n\r\n  /**\r\n   * Name for the property `link` included in data\r\n   *\r\n   * @default \"link\"\r\n   */\r\n  linkPropInData?: string;\r\n\r\n  /**\r\n   * Name for the property `value` included in data\r\n   *\r\n   * @default \"value\"\r\n   */\r\n  valuePropInData?: string;\r\n\r\n  /**\r\n   * Name for the property `children` included in data\r\n   *\r\n   * @default \"children\"\r\n   */\r\n  childrenPropInData?: string;\r\n\r\n  /**\r\n   * Captures on zoom event\r\n   */\r\n  onZoom?: (\r\n    zoomLevel: number,\r\n    zoomId: number,\r\n    breadcrumbItems: IBreadcrumbItem[]\r\n  ) => void;\r\n\r\n  /**\r\n   * Triggers when TreeMap is mounted\r\n   */\r\n  onTreeMapDidMount?: (treeMap: TreeMap<TreeMapInputData>) => void;\r\n\r\n  /**\r\n   * Indicates where to place NumberOfChildren box\r\n   *\r\n   * @default NumberOfChildrenPlacement.BottomRight\r\n   */\r\n  numberOfChildrenPlacement: NumberOfChildrenPlacement;\r\n}\r\n\r\nexport enum ColorModel {\r\n  Depth,\r\n  Value,\r\n  NumberOfChildren,\r\n  OneEachChildren,\r\n}\r\n","export const data = {\r\n  name: \"Documents\",\r\n  children: [\r\n    {\r\n      name: \"AgglomerativeCluster\",\r\n      value: 3938,\r\n      link: \"https://blog.josequinto.com\"\r\n    },\r\n    { name: \"CommunityStructure\", value: 3812 },\r\n    { name: \"HierarchicalCluster\", value: 6714 },\r\n    { name: \"MergeEdge\", value: 743 }\r\n  ]\r\n};\r\n","import \"./App.css\";\r\n\r\nimport ContainerDimensions from \"react-container-dimensions\";\r\nimport { scaleSequential } from \"d3-scale\";\r\nimport * as chromatic from \"d3-scale-chromatic\";\r\nimport { hot } from \"react-hot-loader\";\r\n\r\nimport * as React from \"react\";\r\nimport { data as data1 } from \"../data/data\";\r\nimport { data as data2 } from \"../data/data.1.level\";\r\nimport TreeMap, { ColorModel } from \"../components/TreeMap\";\r\nimport { NumberOfChildrenPlacement } from \"../components/Node\";\r\n\r\ninterface TreeMapInPutData {\r\n  name: string;\r\n  value?: number;\r\n  children?: Array<TreeMapInPutData>;\r\n  className?: string;\r\n}\r\n\r\nclass App extends React.Component<{}, { data: TreeMapInPutData }> {\r\n  private treeMapRef: React.RefObject<TreeMap<TreeMapInPutData>>;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: data1,\r\n    };\r\n    this.treeMapRef = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log(\r\n      \"componentDidMount: \",\r\n      this.treeMapRef && this.treeMapRef.current\r\n    );\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <React.Fragment>\r\n        <ContainerDimensions>\r\n          {({ width, height }) => {\r\n            return (\r\n              <TreeMap<TreeMapInPutData>\r\n                ref={this.treeMapRef}\r\n                id=\"myTreeMap\"\r\n                width={width}\r\n                height={400}\r\n                data={this.state.data}\r\n                valueUnit={\"MB\"}\r\n                className=\"AppTreeMap\"\r\n                nodeClassName=\"AppTreeMap__node\"\r\n                // svgClassName=\"AppTreeMap__svg\"\r\n                paddingInner={2}\r\n                onZoom={(level, id, items) => console.log({ level, id, items })}\r\n                onTreeMapDidMount={(treeMap: TreeMap<TreeMapInPutData>) =>\r\n                  console.log(treeMap.getZoomLevel())\r\n                }\r\n                nodeStyle={{\r\n                  fontSize: 12,\r\n                  paddingTop: 2,\r\n                  paddingLeft: 5,\r\n                  paddingRight: 5,\r\n                }}\r\n                numberOfChildrenPlacement={NumberOfChildrenPlacement.BottomRight}\r\n                customD3ColorScale={scaleSequential(\r\n                  chromatic.interpolateSpectral\r\n                )}\r\n                colorModel={ColorModel.OneEachChildren}\r\n                // svgStyle={{fontFamily: \"'Courier New', Courier, monospace\"}}\r\n                // nodeStyle={{fill: \"black\", stroke: \"white\"}}\r\n                // disableBreadcrumb={true}\r\n                // hideNumberOfChildren={true}\r\n                // hideValue={true}\r\n              />\r\n            );\r\n          }}\r\n        </ContainerDimensions>\r\n        <div>\r\n          <a onClick={() => this.setState({ data: data2 })}>Change data</a>\r\n        </div>\r\n        <div>\r\n          <a onClick={() => this.treeMapRef.current.resetZoom()}>Zoom Reset</a>\r\n        </div>\r\n        <div>\r\n          <a onClick={() => this.treeMapRef.current.zoomOut()}>Zoom out</a>\r\n        </div>\r\n        <div>\r\n          <a\r\n            onClick={() => console.log(this.treeMapRef.current.getZoomLevel())}\r\n          >\r\n            Zoom level\r\n          </a>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default hot(module)(App);\r\n","import \"./Node.css\";\r\n\r\nimport * as React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport { ScaleLinear } from \"d3-scale\";\r\n\r\nexport interface NodeProps {\r\n  /*\r\n        HierarchyRectangularNode properties\r\n    */\r\n  x0?: number;\r\n  y0?: number;\r\n  x1?: number;\r\n  y1?: number;\r\n\r\n  bgColor: string;\r\n  className?: string;\r\n  globalTotalNodes: number;\r\n  hasChildren: boolean;\r\n  height?: number;\r\n  hideNumberOfChildren?: boolean;\r\n  id: number;\r\n  isSelectedNode: boolean;\r\n  label: string;\r\n  name: string;\r\n  nodeTotalNodes: number;\r\n  onClick?: (ev?: React.MouseEvent<SVGElement>) => void;\r\n  style?: React.CSSProperties;\r\n  textColor: string;\r\n  treemapId?: string;\r\n  url: string;\r\n  value: string;\r\n  width?: number;\r\n  xScaleFactor?: number;\r\n  xScaleFunction?: ScaleLinear<number, number>;\r\n  xTranslated?: number;\r\n  yScaleFactor?: number;\r\n  yScaleFunction?: ScaleLinear<number, number>;\r\n  yTranslated?: number;\r\n  zoomEnabled?: boolean;\r\n  numberOfChildrenPlacement: NumberOfChildrenPlacement;\r\n}\r\n\r\nexport enum NumberOfChildrenPlacement {\r\n  TopRight,\r\n  BottomRight,\r\n}\r\n\r\nconst getNumberItemsWidthByNumberOfChars = (\r\n  fontSize: number,\r\n  numberOfChars: number\r\n) => {\r\n  return (fontSize / 2) * numberOfChars + 5;\r\n};\r\n\r\nlet canvas;\r\nconst getTextWidth = (\r\n  text,\r\n  style: React.CSSProperties = {\r\n    fontVariant: \"normal\",\r\n    fontWeight: \"normal\",\r\n    fontSize: 14,\r\n    fontFamily: \"Arial\",\r\n  }\r\n) => {\r\n  // re-use canvas object for better performance\r\n  if (!canvas) {\r\n    canvas = document.createElement(\"canvas\");\r\n  }\r\n  var context = canvas.getContext(\"2d\");\r\n  const { fontVariant, fontWeight, fontSize, fontFamily } = style;\r\n  if (context) {\r\n    context.font = `${fontVariant} ${fontWeight} ${fontSize}px '${fontFamily}'`;\r\n    return {\r\n      width: context.measureText(text).width,\r\n      height: fontSize,\r\n    };\r\n  } else {\r\n    return { width: 0, height: fontSize };\r\n  }\r\n};\r\n\r\nconst charWidthCache: Record<string, number> = {};\r\nconst truncateText = (\r\n  text: string,\r\n  style: React.CSSProperties,\r\n  maxWidth: number,\r\n  ellipsis: string = \"...\"\r\n) => {\r\n  const cachedCharWidth = (char: string) => {\r\n    const cached = charWidthCache[char];\r\n    if (cached !== undefined) {\r\n      return cached;\r\n    }\r\n    const charWidth = getTextWidth(char, style).width;\r\n    charWidthCache[char] = charWidth;\r\n    return charWidth;\r\n  };\r\n\r\n  const truncatedChars: string[] = [];\r\n  const charArray = Array.from(text);\r\n\r\n  const ellipsisWidth = cachedCharWidth(ellipsis);\r\n  if (maxWidth - ellipsisWidth < 0) {\r\n    return text.charAt(0);\r\n  }\r\n\r\n  let currentWidth = ellipsisWidth;\r\n  let didTruncate = false;\r\n  for (let i = 0; i < charArray.length; i++) {\r\n    const charWidth = cachedCharWidth(charArray[i]);\r\n    if (currentWidth + charWidth <= maxWidth) {\r\n      truncatedChars[i] = charArray[i];\r\n      currentWidth += charWidth;\r\n    } else {\r\n      truncatedChars[i] = ellipsis;\r\n      didTruncate = true;\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (didTruncate) {\r\n    return truncatedChars.join(\"\");\r\n  }\r\n\r\n  return text;\r\n};\r\n\r\nconst LabelNewLine = ({\r\n  label,\r\n  textColor,\r\n  fontSize,\r\n  value,\r\n  hasChildren,\r\n  containerWidth,\r\n  style,\r\n}) => {\r\n  if (!label) {\r\n    return null;\r\n  }\r\n\r\n  const fullLabel = value ? `${label}\\xa0${value}` : label;\r\n  const splitLabel =\r\n    getTextWidth(fullLabel, style).width >= containerWidth || !hasChildren\r\n      ? label.split(/(?=[A-Z][^A-Z])/g).concat(value)\r\n      : [fullLabel];\r\n\r\n  return splitLabel.map((item: string, index) => {\r\n    return (\r\n      <tspan\r\n        fontSize={fontSize}\r\n        fill={textColor}\r\n        key={index}\r\n        x={0}\r\n        dy={fontSize}\r\n      >\r\n        {truncateText(item, style, containerWidth)}\r\n      </tspan>\r\n    );\r\n  });\r\n};\r\n\r\nconst NumberOfChildren = ({\r\n  name,\r\n  width,\r\n  height,\r\n  textColor,\r\n  nodeTotalNodes,\r\n  isSelectedNode,\r\n  placement,\r\n  style,\r\n}) => {\r\n  const realPlacement = isSelectedNode\r\n    ? NumberOfChildrenPlacement.TopRight\r\n    : placement;\r\n\r\n  const fontSize = Number(style.fontSize);\r\n  const itemsWidth = getNumberItemsWidthByNumberOfChars(\r\n    fontSize,\r\n    nodeTotalNodes.toString().length\r\n  );\r\n  const itemHeightFactor = 2;\r\n  const itemsHeight = fontSize + itemHeightFactor;\r\n  const strokeDasharrayTotal = itemsWidth + itemsHeight;\r\n  if (width > itemsWidth && height > itemsHeight) {\r\n    return (\r\n      <g\r\n        transform={`translate(0, ${\r\n          realPlacement === NumberOfChildrenPlacement.BottomRight\r\n            ? height - itemsHeight\r\n            : 0\r\n        })`}\r\n      >\r\n        <rect\r\n          id={`rectNumberItems-${name}`}\r\n          x={width - itemsWidth}\r\n          y={0}\r\n          width={itemsWidth}\r\n          height={itemsHeight}\r\n          fill=\"none\"\r\n          stroke={textColor}\r\n          strokeDasharray={`${\r\n            realPlacement === NumberOfChildrenPlacement.BottomRight\r\n              ? itemsWidth\r\n              : 0\r\n          },${strokeDasharrayTotal},${strokeDasharrayTotal}`}\r\n        />\r\n        <text\r\n          fill={textColor}\r\n          x={width - itemsWidth + itemsWidth / 2}\r\n          y={itemsHeight - itemHeightFactor}\r\n          textAnchor=\"middle\"\r\n          style={{\r\n            fontVariant: style.fontVariant,\r\n            fontWeight: style.fontWeight,\r\n            fontSize: style.fontSize,\r\n            fontFamily: style.fontFamily,\r\n          }}\r\n        >\r\n          {nodeTotalNodes}\r\n        </text>\r\n      </g>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nconst Node: React.FunctionComponent<NodeProps> = ({\r\n  bgColor,\r\n  className,\r\n  globalTotalNodes,\r\n  hasChildren,\r\n  height,\r\n  hideNumberOfChildren,\r\n  id,\r\n  isSelectedNode,\r\n  label,\r\n  nodeTotalNodes,\r\n  onClick,\r\n  textColor,\r\n  treemapId,\r\n  url,\r\n  value,\r\n  width,\r\n  x0,\r\n  x1,\r\n  xScaleFactor,\r\n  xScaleFunction,\r\n  xTranslated,\r\n  y0,\r\n  y1,\r\n  yScaleFactor,\r\n  yScaleFunction,\r\n  yTranslated,\r\n  zoomEnabled,\r\n  style,\r\n  numberOfChildrenPlacement,\r\n}) => {\r\n  const currentXTranslated =\r\n    xTranslated !== undefined\r\n      ? xTranslated\r\n      : zoomEnabled === true\r\n      ? xScaleFunction(x0)\r\n      : x0;\r\n  const currentYTranslated =\r\n    yTranslated !== undefined\r\n      ? yTranslated\r\n      : zoomEnabled === true\r\n      ? yScaleFunction(y0)\r\n      : y0;\r\n  const currentWidth = width !== undefined ? width : xScaleFactor * (x1 - x0);\r\n  const currentHeight =\r\n    height !== undefined ? height : yScaleFactor * (y1 - y0);\r\n\r\n  const cursor =\r\n    hasChildren === true && isSelectedNode === false ? \"pointer\" : \"auto\";\r\n\r\n  const fontSize = Number(style.fontSize);\r\n  const itemsWidth = getNumberItemsWidthByNumberOfChars(\r\n    fontSize,\r\n    nodeTotalNodes.toString().length\r\n  );\r\n  const showNumberOfItems = !hideNumberOfChildren && hasChildren;\r\n\r\n  const paddedCurrentWidth =\r\n    currentWidth -\r\n    (Number(style.paddingLeft) || 0) -\r\n    (Number(style.paddingRight) || 4);\r\n  const clipWidth = Math.max(\r\n    0,\r\n    showNumberOfItems &&\r\n      numberOfChildrenPlacement === NumberOfChildrenPlacement.TopRight\r\n      ? paddedCurrentWidth - itemsWidth\r\n      : paddedCurrentWidth\r\n  );\r\n\r\n  return (\r\n    <g\r\n      transform={`translate(${currentXTranslated},${currentYTranslated})`}\r\n      id={`${id}`}\r\n      onClick={hasChildren ? onClick : null}\r\n      style={{ cursor }}\r\n    >\r\n      <rect\r\n        id={`rect-${id}`}\r\n        width={currentWidth}\r\n        height={currentHeight}\r\n        className={classnames(\"Node\", className)}\r\n        style={{\r\n          fill: bgColor,\r\n          stroke: textColor,\r\n          ...style,\r\n        }}\r\n      />\r\n      <clipPath id={`clip-${treemapId}-${id}`}>\r\n        <rect width={clipWidth} height={currentHeight} />\r\n      </clipPath>\r\n      <a\r\n        className={classnames({ Node__link: !!url })}\r\n        href={url}\r\n        target=\"_blank\"\r\n      >\r\n        <text\r\n          clipPath={`url(#clip-${treemapId}-${id})`}\r\n          transform={`translate(${style.paddingLeft || 0},${\r\n            style.paddingTop || 0\r\n          })`}\r\n          style={{\r\n            fontVariant: style.fontVariant,\r\n            fontWeight: style.fontWeight,\r\n            fontSize: style.fontSize,\r\n            fontFamily: style.fontFamily,\r\n          }}\r\n        >\r\n          <LabelNewLine\r\n            label={label}\r\n            textColor={textColor}\r\n            fontSize={fontSize}\r\n            value={value}\r\n            hasChildren={hasChildren}\r\n            containerWidth={clipWidth}\r\n            style={style}\r\n          />\r\n        </text>\r\n      </a>\r\n      {showNumberOfItems && (\r\n        <NumberOfChildren\r\n          name={name}\r\n          width={currentWidth}\r\n          height={currentHeight}\r\n          style={style}\r\n          textColor={textColor}\r\n          nodeTotalNodes={nodeTotalNodes}\r\n          isSelectedNode={isSelectedNode}\r\n          placement={numberOfChildrenPlacement}\r\n        />\r\n      )}\r\n      <title>\r\n        {`${label}\\n${value}\\n${nodeTotalNodes}/${globalTotalNodes}`}\r\n      </title>\r\n    </g>\r\n  );\r\n};\r\n\r\nexport default Node;\r\n","import \"./Breadcrumb.css\";\n\nimport * as React from \"react\";\nimport classnames from \"classnames\";\n\nexport interface IBreadcrumbProps {\n  /**\n   * Collection of breadcrumbs to render\n   */\n  items: IBreadcrumbItem[];\n  className?: string;\n}\n\nexport interface IBreadcrumbItem {\n  /**\n   * Text to display to the user for the breadcrumb\n   */\n  text: string;\n  /**\n   * Arbitrary unique string associated with the breadcrumb\n   */\n  key: number;\n  /**\n   * Callback issued when the breadcrumb is selected.\n   */\n  onClick?: (\n    ev?: React.MouseEvent<HTMLElement>,\n    item?: IBreadcrumbItem\n  ) => void;\n}\n\nexport const Breadcrumb: React.FunctionComponent<IBreadcrumbProps> = ({\n  className,\n  items\n}) => {\n  if (!items) {\n    return null;\n  }\n\n  return (\n    <div className={classnames(\"TreeMap__breadcrumb\", className)}>\n      {items.map((item: IBreadcrumbItem, index: number) => (\n        <div key={index}>\n          <a\n            className=\"TreeMap__breadcrumbItem\"\n            key={item.key}\n            id={`${item.key}`}\n            onClick={item.onClick ? item.onClick : undefined}\n            style={{ cursor: item.onClick ? \"pointer\" : \"auto\" }}\n          >\n            {item.text}\n          </a>\n          {index < items.length - 1 ? (\n            <span className=\"TreeMap__breadcrumbSeparator\">/</span>\n          ) : null}\n        </div>\n      ))}\n    </div>\n  );\n};\n","import { CustomHierarchyRectangularNode } from \"../components/TreeMap/TreeMap\";\nimport { rgb } from \"d3-color\";\n\nexport class Utils {\n  public static getTopSubParent<TreeMapInputData>(\n    node: CustomHierarchyRectangularNode<TreeMapInputData>\n  ): number {\n    if (node.parent && node.parent.parent) {\n      return this.getTopSubParent(node.parent);\n    }\n    return node.customId;\n  }\n\n  public static getDepth<TreeMapInputData>(\n    obj: TreeMapInputData,\n    childrenPropInData: string\n  ) {\n    let depth = 0;\n    if (obj[childrenPropInData]) {\n      obj[childrenPropInData].forEach(d => {\n        const tmpDepth = this.getDepth(d, childrenPropInData);\n        if (tmpDepth > depth) {\n          depth = tmpDepth;\n        }\n      });\n    }\n    return 1 + depth;\n  }\n\n  public static getHighContrastColor(r: number, g: number, b: number) {\n    // based on\n    // http://stackoverflow.com/questions/407793/programmatically-choose-high-contrast-colors\n    // http://stackoverflow.com/questions/3942878/how-to-decide-font-color-in-white-or-black-depending-on-background-color\n    const c = [r / 255, g / 255, b / 255];\n    for (let i = 0; i < c.length; ++i) {\n      if (c[i] <= 0.03928) {\n        c[i] = c[i] / 12.92;\n      } else {\n        c[i] = Math.pow((c[i] + 0.055) / 1.055, 2.4);\n      }\n    }\n    const luminance = 0.2126 * c[0] + 0.7152 * c[1] + 0.0722 * c[2];\n    // return luminance > 0.179 ? \"black\" : \"white\";\n    return luminance > 0.4 ? \"black\" : \"white\";\n  }\n\n  public static getHighContrastColorFromString(\n    backgroundColor: string | undefined\n  ): string {\n    if (!backgroundColor) {\n      return \"black\";\n    }\n    const rgbColor = rgb(backgroundColor);\n    if (rgbColor) {\n      return Utils.getHighContrastColor(rgbColor.r, rgbColor.g, rgbColor.b);\n    }\n  }\n}\n","import * as React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport { format } from \"d3-format\";\r\nimport {\r\n  TreemapLayout,\r\n  HierarchyRectangularNode,\r\n  treemap,\r\n  hierarchy,\r\n  treemapSquarify,\r\n} from \"d3-hierarchy\";\r\nimport { scaleLinear, ScaleSequential, scaleSequential } from \"d3-scale\";\r\nimport { extent } from \"d3-array\";\r\nimport { interpolateSpectral } from \"d3-scale-chromatic\";\r\nimport { interpolateHcl } from \"d3-interpolate\";\r\n\r\nimport Node, { NumberOfChildrenPlacement } from \"../Node\";\r\nimport Breadcrumb from \"../Breadcrumb\";\r\nimport { ITreeMapProps, ColorModel } from \"./ITreeMapProps\";\r\nimport { ITreeMapState } from \"./ITreeMapState\";\r\nimport { Utils } from \"../../utils/Utils\";\r\n\r\nexport interface CustomHierarchyRectangularNode<TreeMapInputData>\r\n  extends HierarchyRectangularNode<TreeMapInputData> {\r\n  customId: number;\r\n}\r\n\r\nclass TreeMap<TreeMapInputData> extends React.Component<\r\n  ITreeMapProps<TreeMapInputData>,\r\n  ITreeMapState<TreeMapInputData>\r\n> {\r\n  // Default Props values\r\n  public static defaultProps: ITreeMapProps<{}> = {\r\n    id: \"myTreeMap\",\r\n    data: null,\r\n    height: 600,\r\n    width: 600,\r\n    valueFormat: \",d\",\r\n    valueUnit: \"MB\",\r\n    disableBreadcrumb: false,\r\n    colorModel: ColorModel.OneEachChildren,\r\n    paddingInner: 0,\r\n    customD3ColorScale: scaleSequential(interpolateSpectral),\r\n    namePropInData: \"name\",\r\n    linkPropInData: \"link\",\r\n    valuePropInData: \"value\", // can be value, count, ...\r\n    childrenPropInData: \"children\",\r\n    numberOfChildrenPlacement: NumberOfChildrenPlacement.BottomRight,\r\n  };\r\n\r\n  // Note. This treemap element initially was using treemap and hierarchy directly on the render.\r\n  //       I noticed a performance problem when the original data \"this.props.data\" has more than 1500 elements.\r\n  //       Now, the component is designed to show only the first level of nodes and when click on one expand the rest.\r\n  private _treemap: TreemapLayout<TreeMapInputData>;\r\n  private _rootData: HierarchyRectangularNode<TreeMapInputData>;\r\n  private _nodes: Array<CustomHierarchyRectangularNode<TreeMapInputData>>;\r\n\r\n  private _valueFormatFunction: (n: number) => string;\r\n  private _nodesbgColorFunction: ScaleSequential<string>;\r\n\r\n  constructor(props: ITreeMapProps<TreeMapInputData>) {\r\n    super(props);\r\n\r\n    const { width, height, data, namePropInData } = props;\r\n\r\n    this._createD3TreeMap(width, height, data);\r\n\r\n    // Default State values\r\n    this.state = {\r\n      height,\r\n      width,\r\n      data,\r\n      xScaleFactor: 1,\r\n      yScaleFactor: 1,\r\n      xScaleFunction: scaleLinear().range([0, width]),\r\n      yScaleFunction: scaleLinear().range([0, height]),\r\n      zoomEnabled: false,\r\n      // TODO: Replace data.name by id\r\n      breadcrumbItems: [\r\n        {\r\n          text: data[namePropInData],\r\n          key: 0,\r\n        },\r\n      ],\r\n      selectedId: 0,\r\n      selectedNode: this._treemap(\r\n        this._rootData\r\n      ) as CustomHierarchyRectangularNode<TreeMapInputData>,\r\n      totalNodes: this._nodes.length,\r\n    };\r\n  }\r\n\r\n  public componentDidMount() {\r\n    const { onTreeMapDidMount } = this.props;\r\n    this._zoomTo(0);\r\n    if (onTreeMapDidMount) {\r\n      onTreeMapDidMount(this);\r\n    }\r\n  }\r\n\r\n  public UNSAFE_componentWillReceiveProps(\r\n    nextProps: ITreeMapProps<TreeMapInputData>\r\n  ) {\r\n    const { width, height } = nextProps;\r\n    if (height !== this.props.height || width !== this.props.width) {\r\n      this.setState({\r\n        width,\r\n        height,\r\n        xScaleFunction: scaleLinear().range([0, width]),\r\n        yScaleFunction: scaleLinear().range([0, height]),\r\n        selectedNode: this._treemap(\r\n          this._rootData\r\n        ) as CustomHierarchyRectangularNode<TreeMapInputData>,\r\n      });\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    const { width, height, breadcrumbItems, selectedNode, data } = this.state;\r\n\r\n    const {\r\n      svgClassName,\r\n      svgStyle,\r\n      className,\r\n      childrenPropInData,\r\n      breadCrumbClassName,\r\n      disableBreadcrumb,\r\n    } = this.props;\r\n\r\n    this._createD3TreeMap(width, height, data);\r\n\r\n    let reactNodes: Array<React.ReactNode> = [];\r\n    const maxLevel = 1;\r\n    const iterateAllChildren = (\r\n      mainNode: CustomHierarchyRectangularNode<TreeMapInputData>,\r\n      level: number\r\n    ) => {\r\n      reactNodes = reactNodes.concat(this._getNode(mainNode));\r\n      if (level < maxLevel) {\r\n        if (\r\n          mainNode.hasOwnProperty(childrenPropInData) &&\r\n          mainNode[childrenPropInData].length > 0\r\n        ) {\r\n          mainNode[childrenPropInData].forEach((element) => {\r\n            iterateAllChildren(element, level + 1);\r\n          });\r\n        }\r\n      }\r\n    };\r\n    iterateAllChildren(selectedNode, 0);\r\n\r\n    return (\r\n      <div className={className}>\r\n        {disableBreadcrumb === false ? (\r\n          <Breadcrumb items={breadcrumbItems} className={breadCrumbClassName} />\r\n        ) : null}\r\n        <svg\r\n          className={classnames(svgClassName)}\r\n          height={height}\r\n          width={width}\r\n          style={{ ...svgStyle }}\r\n        >\r\n          {reactNodes}\r\n        </svg>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private _createD3TreeMap(\r\n    width: number,\r\n    height: number,\r\n    data: TreeMapInputData\r\n  ) {\r\n    const {\r\n      valuePropInData,\r\n      childrenPropInData,\r\n      paddingInner,\r\n      valueFormat,\r\n      colorModel,\r\n      customD3ColorScale,\r\n    } = this.props;\r\n\r\n    // 1. Create treemap structure\r\n    this._treemap = treemap<TreeMapInputData>()\r\n      .size([width, height])\r\n      .tile(treemapSquarify)\r\n      .paddingOuter(3)\r\n      .paddingTop(19)\r\n      .paddingInner(paddingInner)\r\n      .round(true);\r\n\r\n    // 2. Before compute a hierarchical layout, we need a root node\r\n    //    If the data is in JSON we use d3.hierarchy\r\n    this._rootData = hierarchy(data)\r\n      .sum((s) => s[valuePropInData])\r\n      .sort(\r\n        (a, b) => b.height - a.height || b[valuePropInData] - a[valuePropInData]\r\n      ) as HierarchyRectangularNode<TreeMapInputData>;\r\n\r\n    // 3. Get array of nodes\r\n    let numberItemId = 0;\r\n    this._nodes = this._treemap(this._rootData)\r\n      .each((item: CustomHierarchyRectangularNode<TreeMapInputData>) => {\r\n        item.customId = numberItemId++;\r\n      })\r\n      .descendants() as Array<CustomHierarchyRectangularNode<TreeMapInputData>>;\r\n\r\n    // Format function\r\n    this._valueFormatFunction = format(valueFormat);\r\n\r\n    let d: [number | { valueOf(): number }, number | { valueOf(): number }];\r\n    switch (colorModel) {\r\n      case ColorModel.Depth:\r\n        d = [0, Utils.getDepth<TreeMapInputData>(data, childrenPropInData) - 1];\r\n        break;\r\n      case ColorModel.Value:\r\n        d = extent(this._nodes, (n) => {\r\n          if (n.parent !== null) {\r\n            return n[valuePropInData];\r\n          }\r\n        });\r\n        break;\r\n      case ColorModel.NumberOfChildren:\r\n        d = extent(this._nodes, (n) =>\r\n          n.parent !== null ? n.descendants().length : 1\r\n        );\r\n        break;\r\n      case ColorModel.OneEachChildren:\r\n        d = [data[childrenPropInData] ? data[childrenPropInData].length : 0, 0];\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    this._nodesbgColorFunction = customD3ColorScale.domain(d);\r\n  }\r\n\r\n  private _getNode(node: CustomHierarchyRectangularNode<TreeMapInputData>) {\r\n    const {\r\n      id: treemapId,\r\n      valueUnit,\r\n      hideValue,\r\n      hideNumberOfChildren,\r\n      nodeStyle,\r\n      nodeClassName,\r\n      valuePropInData,\r\n      childrenPropInData,\r\n      namePropInData,\r\n      linkPropInData,\r\n      numberOfChildrenPlacement,\r\n    } = this.props;\r\n\r\n    const {\r\n      totalNodes,\r\n      selectedId,\r\n      xScaleFactor,\r\n      xScaleFunction,\r\n      yScaleFactor,\r\n      yScaleFunction,\r\n      zoomEnabled,\r\n    } = this.state;\r\n\r\n    const { customId, data, x0, x1, y0, y1 } = node;\r\n\r\n    const name = data[namePropInData];\r\n    const url = data[linkPropInData];\r\n    const nodeClassNameFromData = data[\"className\"];\r\n\r\n    const hasChildren =\r\n      node[childrenPropInData] && node[childrenPropInData].length > 0\r\n        ? true\r\n        : false;\r\n    const formattedValue = `(${this._valueFormatFunction(\r\n      node[valuePropInData]\r\n    )} ${valueUnit})`;\r\n\r\n    const nodeTotalNodes = node.descendants().length - 1;\r\n\r\n    const { bgColor, textColor } = this._getColorsFromNode(\r\n      node,\r\n      nodeTotalNodes\r\n    );\r\n\r\n    const isSelectedNode = customId === selectedId;\r\n\r\n    return (\r\n      <Node\r\n        bgColor={bgColor}\r\n        className={classnames(nodeClassName, nodeClassNameFromData)}\r\n        style={{\r\n          fontVariant: \"normal\",\r\n          fontWeight: \"normal\",\r\n          fontSize: 14,\r\n          fontFamily: \"Arial\",\r\n          ...nodeStyle,\r\n        }}\r\n        globalTotalNodes={totalNodes}\r\n        hasChildren={hasChildren}\r\n        hideNumberOfChildren={hideNumberOfChildren}\r\n        id={customId}\r\n        isSelectedNode={isSelectedNode}\r\n        key={customId}\r\n        label={name}\r\n        name={name}\r\n        nodeTotalNodes={nodeTotalNodes}\r\n        onClick={!isSelectedNode ? this._onNodeClick : undefined}\r\n        textColor={textColor}\r\n        treemapId={treemapId}\r\n        url={url}\r\n        value={!hideValue && formattedValue}\r\n        x0={x0}\r\n        x1={x1}\r\n        xScaleFactor={xScaleFactor}\r\n        xScaleFunction={xScaleFunction}\r\n        y0={y0}\r\n        y1={y1}\r\n        yScaleFactor={yScaleFactor}\r\n        yScaleFunction={yScaleFunction}\r\n        zoomEnabled={zoomEnabled}\r\n        numberOfChildrenPlacement={numberOfChildrenPlacement}\r\n      />\r\n    );\r\n  }\r\n\r\n  private _onBreadcrumbItemClicked = (ev: React.MouseEvent<HTMLElement>) => {\r\n    this._zoomTo(Number(ev.currentTarget.id));\r\n  };\r\n\r\n  private _onNodeClick = (ev: React.MouseEvent<SVGElement>) => {\r\n    this._zoomTo(parseInt(ev.currentTarget.id));\r\n  };\r\n\r\n  private _getColorsFromNode(\r\n    node: CustomHierarchyRectangularNode<TreeMapInputData>,\r\n    nodeTotalNodes: number\r\n  ) {\r\n    const { colorModel, valuePropInData } = this.props;\r\n\r\n    let backgroundColor;\r\n    switch (colorModel) {\r\n      case ColorModel.Depth:\r\n        backgroundColor = this._nodesbgColorFunction(node.depth);\r\n        if (node.parent === null) {\r\n          backgroundColor = this._nodesbgColorFunction(0);\r\n        }\r\n        break;\r\n      case ColorModel.Value:\r\n        backgroundColor = this._nodesbgColorFunction(node[valuePropInData]);\r\n        if (node.parent === null) {\r\n          backgroundColor = this._nodesbgColorFunction(1);\r\n        }\r\n        break;\r\n      case ColorModel.NumberOfChildren:\r\n        backgroundColor = this._nodesbgColorFunction(nodeTotalNodes);\r\n        if (node.parent === null) {\r\n          backgroundColor = this._nodesbgColorFunction(1);\r\n        }\r\n        break;\r\n      case ColorModel.OneEachChildren:\r\n        const originalBackgroundColor = this._nodesbgColorFunction(\r\n          Utils.getTopSubParent<TreeMapInputData>(node)\r\n        );\r\n        if (node.depth > 1) {\r\n          backgroundColor = scaleLinear<string>()\r\n            .domain([0, node && node.children ? node.children.length : 0])\r\n            .interpolate(interpolateHcl)\r\n            .range([\"white\", originalBackgroundColor])(\r\n            Utils.getTopSubParent<TreeMapInputData>(node)\r\n          );\r\n        } else {\r\n          backgroundColor = originalBackgroundColor;\r\n        }\r\n        if (node.parent === null) {\r\n          backgroundColor = this._nodesbgColorFunction(0);\r\n        }\r\n      default:\r\n        break;\r\n    }\r\n\r\n    return {\r\n      bgColor: backgroundColor,\r\n      textColor: Utils.getHighContrastColorFromString(backgroundColor),\r\n    };\r\n  }\r\n\r\n  private _zoomTo(nodeId: number) {\r\n    const { xScaleFunction, yScaleFunction, width, height } = this.state;\r\n\r\n    const { onZoom } = this.props;\r\n\r\n    const currentNode = this._nodes\r\n      .filter((item: CustomHierarchyRectangularNode<TreeMapInputData>) => {\r\n        return item.customId.toString() === nodeId.toString();\r\n      })\r\n      .pop();\r\n    if (currentNode) {\r\n      const x = currentNode.x0;\r\n      const y = currentNode.y0;\r\n      const dx = currentNode.x1 - currentNode.x0;\r\n      const dy = currentNode.y1 - currentNode.y0;\r\n      const xScaleFactor = width / dx;\r\n      const yScaleFactor = height / dy;\r\n      const breadcrumbItems = this._treemap(this._rootData)\r\n        .path(currentNode)\r\n        .map(\r\n          ({\r\n            data,\r\n            customId,\r\n          }: CustomHierarchyRectangularNode<TreeMapInputData>) => {\r\n            return {\r\n              text: data[\"name\"],\r\n              key: customId,\r\n              onClick:\r\n                customId !== nodeId ? this._onBreadcrumbItemClicked : undefined,\r\n            };\r\n          }\r\n        );\r\n      if (onZoom) {\r\n        onZoom(currentNode.depth, nodeId, breadcrumbItems);\r\n      }\r\n      this.setState({\r\n        xScaleFactor,\r\n        yScaleFactor,\r\n        xScaleFunction: xScaleFunction.domain([x, x + dx]),\r\n        yScaleFunction: yScaleFunction.domain([y, y + dy]),\r\n        zoomEnabled: currentNode.parent === null ? false : true,\r\n        selectedId: nodeId,\r\n        selectedNode: currentNode,\r\n        breadcrumbItems,\r\n      });\r\n    } else {\r\n      console.warn(\"No node found for \" + nodeId);\r\n    }\r\n  }\r\n\r\n  public resetZoom() {\r\n    this._zoomTo(0);\r\n  }\r\n\r\n  public zoomOut() {\r\n    const { selectedId } = this.state;\r\n    const selectedNode = this._nodes\r\n      .filter((item: CustomHierarchyRectangularNode<TreeMapInputData>) => {\r\n        return item.customId === selectedId;\r\n      })\r\n      .pop();\r\n    if (\r\n      selectedNode &&\r\n      selectedNode.parent &&\r\n      selectedNode.parent.customId !== undefined\r\n    ) {\r\n      this._zoomTo(selectedNode.parent.customId);\r\n    }\r\n  }\r\n\r\n  public getZoomLevel() {\r\n    const { selectedNode } = this.state;\r\n    return selectedNode.depth;\r\n  }\r\n}\r\n\r\nexport default TreeMap;\r\n"],"sourceRoot":""}