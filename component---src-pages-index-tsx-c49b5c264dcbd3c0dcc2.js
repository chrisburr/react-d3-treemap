(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{163:function(e,t,o){"use strict";o.r(t);var n=o(176);t.default=n.a},176:function(e,t,o){"use strict";(function(e){var n=o(9),a=o.n(n),r=(o(41),o(166),o(189),o(190)),i=o.n(r),l=o(224),c=o(226),d=o(210),s=o(0),u=o(202),h=o(212),m=o(184),p=function(e){function t(t){var o;return(o=e.call(this,t)||this).state={data:u.a},o.treeMapRef=s.createRef(),o}a()(t,e);var o=t.prototype;return o.componentDidMount=function(){console.log("componentDidMount: ",this.treeMapRef&&this.treeMapRef.current)},o.render=function(){var e=this;return s.createElement(s.Fragment,null,s.createElement(i.a,null,(function(t){var o=t.width;t.height;return s.createElement(h.b,{ref:e.treeMapRef,id:"myTreeMap",width:o,height:400,data:e.state.data,className:"AppTreeMap",nodeClassName:"AppTreeMap__node",valueFn:function(e){return e.toString().charAt(0)+" min"},levelsToDisplay:2,paddingInner:2,onZoom:function(e,t,o){return console.log({level:e,id:t,items:o})},onTreeMapDidMount:function(e){return console.log(e.getZoomLevel())},nodeStyle:{fontSize:12,paddingTop:2,paddingLeft:5,paddingRight:5},numberOfChildrenPlacement:m.a.TopRight,customD3ColorScale:Object(l.a)(c.a),colorModel:h.a.OneEachChildren,darkNodeBorderColor:"silver",darkNodeTextColor:"white",lightNodeBorderColor:"brown",lightNodeTextColor:"brown"})})),s.createElement("div",null,s.createElement("a",{onClick:function(){return e.setState({data:u.a})}},"Change data")),s.createElement("div",null,s.createElement("a",{onClick:function(){return e.treeMapRef.current.resetZoom()}},"Zoom Reset")),s.createElement("div",null,s.createElement("a",{onClick:function(){return e.treeMapRef.current.zoomOut()}},"Zoom out")),s.createElement("div",null,s.createElement("a",{onClick:function(){return console.log(e.treeMapRef.current.getZoomLevel())}},"Zoom level")))},t}(s.Component);t.a=Object(d.hot)(e)(p)}).call(this,o(187)(e))},179:function(e,t,o){"use strict";var n=o(0),a={showTooltip:function(){throw new Error("TooltipContext not initalized")},hideTooltip:function(){throw new Error("TooltipContext not initalized")},disableTooltip:!1},r=n.createContext(a);t.a=r},184:function(e,t,o){"use strict";o(167),o(41),o(166),o(42),o(205);var n,a,r=o(0),i=o(173),l=o.n(i),c=o(179),d=function(){return r.useContext(c.a)},s=(o(206),r.memo((function(e){var t=e.label,o=e.value,n=d().tooltipClassName;return r.createElement("div",{className:n},r.createElement("div",{className:"TreeMap__tooltip"},void 0!==o?r.createElement(r.Fragment,null,r.createElement("span",{className:"TreeMap__tooltipLabel"},t,": "),r.createElement("span",{className:"TreeMap__tooltipValue"},""+o)):t))}))),u=(o(108),o(109),o(104),o(70),o(105),function(e,t){void 0===t&&(t={fontVariant:"normal",fontWeight:"normal",fontSize:14,fontFamily:"Arial"}),n||(n=document.createElement("canvas"));var o=n.getContext("2d"),a=t,r=a.fontVariant,i=a.fontWeight,l=a.fontSize,c=a.fontFamily,d=Number(l)+2;return o?(o.font=r+" "+i+" "+l+"px '"+c+"'",{width:Number(o.measureText(e).width),height:d}):{width:0,height:d}}),h={},m=function(e,t){return e/2*t+5};!function(e){e[e.TopRight=0]="TopRight",e[e.BottomRight=1]="BottomRight"}(a||(a={}));var p=function(e){var t=e.customId,o=e.width,n=e.height,i=e.textColor,l=e.nodeTotalNodes,c=e.isSelectedNode,d=e.placement,s=e.style,u=c?a.TopRight:d,h=Number(s.fontSize),p=m(h,l.toString().length),f=h+2,g=p+f;return o>p&&n>f?r.createElement("g",{transform:"translate(0, "+(u===a.BottomRight?n-f:0)+")"},r.createElement("rect",{id:"rectNumberItems-"+t,x:o-p,y:0,width:p,height:f,fill:"none",stroke:i,strokeDasharray:(u===a.BottomRight?p:0)+","+g+","+g}),r.createElement("text",{fill:i,x:o-p+p/2,y:f-2,textAnchor:"middle",style:{fontVariant:s.fontVariant,fontWeight:s.fontWeight,fontSize:s.fontSize,fontFamily:s.fontFamily}},l)):null},f=(o(33),o(106),o(68),function(e){var t=e.label,o=e.textColor,n=e.value,a=e.hasChildren,i=e.containerWidth,l=e.containerHeight,c=e.style;if(!t)return null;var d=n?t+"Â "+n:t,s=u(d,c),m=s.width,p=s.height;if(l<p)return null;var f=Math.floor(l/p),g=m>=i||!a?t.split(/(?=[A-Z/a-z0-9.][^A-Z/a-z0-9. ])/g).concat(n).slice(0,f):[d];return r.createElement(r.Fragment,null,g.map((function(e,t){return r.createElement("tspan",{fontSize:c.fontSize,fill:o,key:t,x:0,dy:c.fontSize},function(e,t,o,n){void 0===n&&(n="...");var a=function(e){var o=h[e];if(void 0!==o)return o;var n=u(e,t).width;return h[e]=n,n},r=[],i=Array.from(e),l=a(n);if(o-l<0)return e.charAt(0);for(var c=l,d=!1,s=0;s<i.length;s++){var m=a(i[s]);if(!(c+m<=o)){r[s]=n,d=!0;break}r[s]=i[s],c+=m}return d?r.join(""):e}(e,c,i))})))}),g=function(e){var t=e.bgColor,o=e.borderColor,n=e.className,i=e.hasChildren,c=e.height,u=e.hideNumberOfChildren,h=e.id,g=e.isSelectedNode,b=e.label,C=e.nodeTotalNodes,v=e.onClick,N=e.textColor,T=e.treemapId,k=e.url,y=e.value,S=e.width,x=e.x0,E=e.x1,_=e.xScaleFactor,F=e.xScaleFunction,w=e.xTranslated,O=e.y0,I=e.y1,D=e.yScaleFactor,M=e.yScaleFunction,z=e.yTranslated,P=e.zoomEnabled,R=e.style,j=e.numberOfChildrenPlacement,B=void 0!==w?w:!0===P?F(x):x,V=void 0!==z?z:!0===P?M(O):O,A=void 0!==S?S:_*(E-x),L=void 0!==c?c:D*(I-O),Z=!0===i&&!1===g?"pointer":"auto",W=Number(R.fontSize),H=m(W,C.toString().length),X=!u&&i,Y=A-(Number(R.paddingLeft)||0)-(Number(R.paddingRight)||4),J=Math.max(0,X&&j===a.TopRight?Y-H:Y),U=d(),q=U.hideTooltip,G=U.showTooltip,K=U.disableTooltip,Q=r.useCallback((function(e){G(r.createElement(s,{label:b,value:y}),e)}),[G]),$=r.useCallback((function(){q()}),[G]);return r.createElement("g",{onMouseEnter:K?void 0:Q,onMouseLeave:K?void 0:$,onMouseMove:K?void 0:Q,transform:"translate("+B+","+V+")",id:""+h,onClick:i?v:null,style:{cursor:Z}},r.createElement("rect",{id:"rect-"+h,width:A,height:L,className:l()("Node",n),style:Object.assign({fill:t,stroke:o},R)}),r.createElement("clipPath",{id:"clip-"+T+"-"+h},r.createElement("rect",{width:J,height:L})),r.createElement("a",{className:l()({Node__link:!!k}),href:k,target:"_blank"},r.createElement("text",{clipPath:"url(#clip-"+T+"-"+h+")",transform:"translate("+(R.paddingLeft||0)+","+(R.paddingTop||0)+")",style:{fontVariant:R.fontVariant,fontWeight:R.fontWeight,fontSize:R.fontSize,fontFamily:R.fontFamily}},r.createElement(f,{label:b,textColor:N,value:y,hasChildren:i,containerWidth:J,containerHeight:L,style:R}))),X&&r.createElement(p,{customId:h,width:A,height:L,style:R,textColor:N,nodeTotalNodes:C,isSelectedNode:g,placement:j}))};o.d(t,"b",(function(){return g})),o.d(t,"a",(function(){return a}))},202:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var n={name:"Documents",children:[{name:"AgglomerativeCluster",value:3938,link:"https://blog.josequinto.com"},{name:"CommunityStructure",value:3812},{name:"Child 2",value:6714},{name:"Child 1",children:[{name:"Child 1.1",value:12},{name:"Child 1.2",value:200},{name:"Child 1.3",value:300},{name:"Child 1.4",value:743}]}]}},212:function(e,t,o){"use strict";var n,a=o(9),r=o.n(a),i=(o(167),o(42),o(102),o(41),o(166),o(68),o(107),o(0)),l=o(173),c=o.n(l),d=o(222),s=o(225),u=o(214),h=o(221),m=o(174),p=o(224),f=o(220),g=o(226),b=o(227),C=o(184),v=(o(207),function(e){var t=e.className,o=e.items;return o?i.createElement("div",{className:c()("TreeMap__breadcrumb",t)},o.map((function(e,t){return i.createElement("div",{key:t},i.createElement("a",{className:"TreeMap__breadcrumbItem",key:e.key,id:""+e.key,onClick:e.onClick?e.onClick:void 0,style:{cursor:e.onClick?"pointer":"auto"}},e.text),t<o.length-1?i.createElement("span",{className:"TreeMap__breadcrumbSeparator"},"/"):null)}))):null});!function(e){e[e.Depth=0]="Depth",e[e.Value=1]="Value",e[e.NumberOfChildren=2]="NumberOfChildren",e[e.OneEachChildren=3]="OneEachChildren"}(n||(n={}));var N=o(208),T=function(){function e(){}return e.getTopSubParent=function(e){return e.parent&&e.parent.parent?this.getTopSubParent(e.parent):e.customId},e.getDepth=function(e,t){var o=this,n=0;return e[t]&&e[t].forEach((function(e){var a=o.getDepth(e,t);a>n&&(n=a)})),1+n},e.getHighContrastColor=function(e,t,o){for(var n=[e/255,t/255,o/255],a=0;a<n.length;++a)n[a]<=.03928?n[a]=n[a]/12.92:n[a]=Math.pow((n[a]+.055)/1.055,2.4);return.2126*n[0]+.7152*n[1]+.0722*n[2]>.4?"light":"dark"},e.getHighContrastColorFromString=function(t){if(!t)return"dark";var o=Object(N.d)(t);return o?e.getHighContrastColor(o.r,o.g,o.b):void 0},e}(),k=o(228),y=i.memo((function(e){var t=e.position,o=e.placement,n=e.offsetX,a=void 0===n?0:n,r=e.offsetY,l=void 0===r?0:r,c=e.children,d=Object(k.a)(),s=d[0],u=d[1],h=u.width,m=u.height,p=t[0],f=t[1],g=Math.round(p),b=Math.round(f);if(h>0&&m>0)switch(o){case"bottom":g-=h/2,b+=10;break;case"bottomLeft":g-=h+10,b+=m/2+10;break;case"bottomRight":g+=10,b+=m/2+10;break;case"left":g-=h+10,b-=m/2;break;case"right":g+=10,b-=m/2;break;case"top":g-=h/2,b-=m+10;break;case"topLeft":g-=h+10,b-=m+10;break;case"topRight":g+=10,b-=m+10}var C={pointerEvents:"none",position:"absolute",zIndex:10,top:0,left:0,maxWidth:"calc(50% - 15px)",transform:"translate("+(g+=a)+"px, "+(b+=l)+"px)"};return i.createElement("div",{ref:s,style:C},c)})),S=o(179),x=function(e){var t=e.tooltipPlacement,o=e.tooltipClassName,n=e.tooltipOffsetX,a=e.tooltipOffsetY,r=e.disableTooltip,l=e.children,c=i.useRef(null),d=i.useState(!1),s=d[0],u=d[1],h=i.useState([null,null]),m=h[0],p=h[1],f=i.useState(null),g=f[0],b=f[1],C=i.useState(t),v=C[0],N=C[1],T=i.useCallback((function(e,t){var o=t.clientX,n=t.clientY,a=c.current.getBoundingClientRect(),r=a.width,i=a.height,l=o-a.left,d=n-a.top;v||N(l<r/2?d<i/2?"bottomRight":"topRight":d<i/2?"bottomLeft":"topLeft");u(!0),p([l,d]),b(e)}),[c,b,u,p]),k=i.useCallback((function(){u(!1)}),[u,p]),x=i.useMemo((function(){return{showTooltip:T,hideTooltip:k,tooltipClassName:o,disableTooltip:r}}),[T,k,o]);return i.createElement(S.a.Provider,{value:x},i.createElement("div",{ref:c},l,s&&i.createElement(y,{position:m,placement:v,offsetX:n,offsetY:a},g)))},E=function(e){function t(t){var o;(o=e.call(this,t)||this)._onBreadcrumbItemClicked=function(e){o._zoomTo(Number(e.currentTarget.id))},o._onNodeClick=function(e){o._zoomTo(parseInt(e.currentTarget.id))};var n=t.width,a=t.height,r=t.data,i=t.namePropInData;return o._createD3TreeMap(n,a,r),o.state={height:a,width:n,data:r,xScaleFactor:1,yScaleFactor:1,xScaleFunction:Object(m.a)().range([0,n]),yScaleFunction:Object(m.a)().range([0,a]),zoomEnabled:!1,breadcrumbItems:[{text:r[i],key:0}],selectedId:0,selectedNode:o._treemap(o._rootData)},o}r()(t,e);var o=t.prototype;return o.componentDidMount=function(){var e=this.props.onTreeMapDidMount;this._zoomTo(0),e&&e(this)},o.UNSAFE_componentWillReceiveProps=function(e){var t=e.width,o=e.height;o===this.props.height&&t===this.props.width||this.setState({width:t,height:o,xScaleFunction:Object(m.a)().range([0,t]),yScaleFunction:Object(m.a)().range([0,o]),selectedNode:this._treemap(this._rootData)})},o.render=function(){var e=this,t=this.state,o=t.width,n=t.height,a=t.breadcrumbItems,r=t.selectedNode,l=t.data,d=this.props,s=d.svgClassName,u=d.svgStyle,h=d.className,m=d.childrenPropInData,p=d.breadCrumbClassName,f=d.disableBreadcrumb,g=d.tooltipPlacement,b=d.tooltipClassName,C=d.disableTooltip,N=d.tooltipOffsetX,T=d.tooltipOffsetY,k=d.levelsToDisplay;this._createD3TreeMap(o,n,l);var y=[],S=k;return function t(o,n){y=y.concat(e._getNode(o)),n<S&&o.hasOwnProperty(m)&&o[m].length>0&&o[m].forEach((function(e){t(e,n+1)}))}(r,0),i.createElement(x,{tooltipPlacement:g,tooltipClassName:b,disableTooltip:C,tooltipOffsetX:N,tooltipOffsetY:T},i.createElement("div",{className:h},!1===f?i.createElement(v,{items:a,className:p}):null,i.createElement("svg",{className:c()(s),height:n,width:o,style:Object.assign({},u)},y)))},o._createD3TreeMap=function(e,t,o){var a=this.props,r=a.valuePropInData,i=a.childrenPropInData,l=a.paddingInner,c=a.valueFormat,m=a.colorModel,p=a.customD3ColorScale,g=a.valueFn;this._treemap=Object(s.a)().size([e,t]).tile(u.a.ratio(1)).paddingOuter(3).paddingTop(19).paddingInner(l).round(!0),this._rootData=Object(h.a)(o).sum((function(e){return e[r]})).sort((function(e,t){return t.height-e.height||t[r]-e[r]}));var b,C=0;this._nodes=this._treemap(this._rootData).each((function(e){e.customId=C++})).descendants();try{this._valueFormatFunction=g||Object(d.a)(c)}catch(v){console.warn(v)}switch(m){case n.Depth:b=[0,T.getDepth(o,i)-1];break;case n.Value:b=Object(f.a)(this._nodes,(function(e){if(null!==e.parent)return e[r]}));break;case n.NumberOfChildren:b=Object(f.a)(this._nodes,(function(e){return null!==e.parent?e.descendants().length:1}));break;case n.OneEachChildren:b=[o[i]?o[i].length:0,0]}this._nodesbgColorFunction=p.domain(b)},o._getNode=function(e){var t=this.props,o=t.id,n=t.valueUnit,a=t.hideValue,r=t.hideNumberOfChildren,l=t.nodeStyle,d=t.nodeClassName,s=t.valuePropInData,u=t.childrenPropInData,h=t.namePropInData,m=t.linkPropInData,p=t.numberOfChildrenPlacement,f=t.darkNodeTextColor,g=t.darkNodeBorderColor,b=t.lightNodeTextColor,v=t.lightNodeBorderColor,N=this.state,T=N.selectedId,k=N.xScaleFactor,y=N.xScaleFunction,S=N.yScaleFactor,x=N.yScaleFunction,E=N.zoomEnabled,_=e.customId,F=e.data,w=e.x0,O=e.x1,I=e.y0,D=e.y1,M=F[h],z=F[m],P=F.className,R=!!(e[u]&&e[u].length>0),j=e[s];try{j=this._valueFormatFunction(e[s])}catch(X){console.warn(X)}var B="("+j+(n?" "+n:"")+")",V=e.descendants().length-1,A=this._getColorsFromNode(e,V,{darkNodeTextColor:f,darkNodeBorderColor:g,lightNodeTextColor:b,lightNodeBorderColor:v}),L=A.bgColor,Z=A.textColor,W=A.borderColor,H=_===T;return i.createElement(C.b,{bgColor:L,textColor:Z,borderColor:W,className:c()(d,P),style:Object.assign({fontVariant:"normal",fontWeight:"normal",fontSize:14,fontFamily:"Arial"},l),hasChildren:R,hideNumberOfChildren:r,id:_,isSelectedNode:H,key:_,label:M,nodeTotalNodes:V,onClick:H?void 0:this._onNodeClick,treemapId:o,url:z,value:!a&&B,x0:w,x1:O,xScaleFactor:k,xScaleFunction:y,y0:I,y1:D,yScaleFactor:S,yScaleFunction:x,zoomEnabled:E,numberOfChildrenPlacement:p})},o._getColorsFromNode=function(e,t,o){var a,r=o.darkNodeTextColor,i=o.darkNodeBorderColor,l=o.lightNodeTextColor,c=o.lightNodeBorderColor,d=this.props,s=d.colorModel,u=d.valuePropInData;switch(s){case n.Depth:a=this._nodesbgColorFunction(e.depth),null===e.parent&&(a=this._nodesbgColorFunction(0));break;case n.Value:a=this._nodesbgColorFunction(e[u]),null===e.parent&&(a=this._nodesbgColorFunction(1));break;case n.NumberOfChildren:a=this._nodesbgColorFunction(t),null===e.parent&&(a=this._nodesbgColorFunction(1));break;case n.OneEachChildren:var h=this._nodesbgColorFunction(T.getTopSubParent(e));a=e.depth>1?Object(m.a)().domain([0,e&&e.children?e.children.length:0]).interpolate(b.a).range(["white",h])(T.getTopSubParent(e)):h,null===e.parent&&(a=this._nodesbgColorFunction(0))}return{bgColor:a,textColor:"dark"===T.getHighContrastColorFromString(a)?r:l,borderColor:"dark"===T.getHighContrastColorFromString(a)?i:c}},o._zoomTo=function(e){var t=this,o=this.state,n=o.xScaleFunction,a=o.yScaleFunction,r=o.width,i=o.height,l=this.props.onZoom,c=this._nodes.filter((function(t){return t.customId.toString()===e.toString()})).pop();if(c){var d=c.x0,s=c.y0,u=c.x1-c.x0,h=c.y1-c.y0,m=r/u,p=i/h,f=this._treemap(this._rootData).path(c).map((function(o){var n=o.data,a=o.customId;return{text:n.name,key:a,onClick:a!==e?t._onBreadcrumbItemClicked:void 0}}));l&&l(c.depth,e,f),this.setState({xScaleFactor:m,yScaleFactor:p,xScaleFunction:n.domain([d,d+u]),yScaleFunction:a.domain([s,s+h]),zoomEnabled:null!==c.parent,selectedId:e,selectedNode:c,breadcrumbItems:f})}else console.warn("No node found for "+e)},o.resetZoom=function(){this._zoomTo(0)},o.zoomOut=function(){var e=this.state.selectedId,t=this._nodes.filter((function(t){return t.customId===e})).pop();t&&t.parent&&void 0!==t.parent.customId&&this._zoomTo(t.parent.customId)},o.getZoomLevel=function(){return this.state.selectedNode.depth},t}(i.Component);E.defaultProps={id:"myTreeMap",data:null,height:600,width:600,valueFormat:",d",disableBreadcrumb:!1,colorModel:n.OneEachChildren,paddingInner:0,customD3ColorScale:Object(p.a)(g.a),namePropInData:"name",linkPropInData:"link",valuePropInData:"value",childrenPropInData:"children",numberOfChildrenPlacement:C.a.BottomRight,darkNodeTextColor:"white",darkNodeBorderColor:"white",lightNodeTextColor:"black",lightNodeBorderColor:"black",disableTooltip:!1,tooltipOffsetX:0,tooltipOffsetY:0,levelsToDisplay:1};var _=E;o.d(t,"b",(function(){return _})),o.d(t,"a",(function(){return n}))}}]);
//# sourceMappingURL=component---src-pages-index-tsx-c49b5c264dcbd3c0dcc2.js.map